{"ast":null,"code":"import _defineProperty from\"C:\\\\Users\\\\User\\\\Desktop\\\\Project3Lessons\\\\client\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/defineProperty\";import _objectSpread from\"C:\\\\Users\\\\User\\\\Desktop\\\\Project3Lessons\\\\client\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"C:\\\\Users\\\\User\\\\Desktop\\\\Project3Lessons\\\\client\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from'react';// import Layout from '../core/Layout';\nimport axios from'axios';import'react-toastify/dist/ReactToastify.min.css';import{getCookie,isAuth}from'../../../auth/helpers';import{Card,Accordion}from'react-bootstrap';var UserNotes=function UserNotes(_ref){var history=_ref.history;var _useState=useState({title:\"\",category:\"\",body:\"\",UserId:\"\",LessonId:\"\",NoteId:\"\",showHideEdit:false}),_useState2=_slicedToArray(_useState,2),values=_useState2[0],setValues=_useState2[1];var token=getCookie('token');useEffect(function(){loadProfile();},[]);var handleChange=function handleChange(name){return function(event){setValues(_objectSpread({},values,_defineProperty({title:title,category:category,body:body,bookcategory:bookcategory},name,event.target.value)));};};var loadProfile=function loadProfile(){//grabbing the URL from the window\nvar URLarray=window.document.URL.split(\"/\");var URLarrVar=URLarray[URLarray.length-1];var URL_id=URLarrVar.split(\"?\");//GET the correct logged user\nif(token){axios({method:'GET',url:\"\".concat(process.env.REACT_APP_API,\"/user/\").concat(isAuth),headers:{Authorization:\"Bearer \".concat(token)}}).then(function(response){//set all the values of the user\nif(response.data.notes.length===0){//if the user has notes identify if there are notes that belong to this lesson\n}else{response.data.notes.map(function(note){if(note.Lesson_id===URL_id[0]){setValues(_objectSpread({},values,{NoteId:note._id,title:note.title,category:note.category,body:note.body}));//notes that do not belong to this lesson are reported in console.\n}});}});};};var NoteId=values.NoteId,title=values.title,category=values.category,body=values.body,bookcategory=values.bookcategory;//handle all edits to the notes as a POST\nvar handleSubmitEdit=function handleSubmitEdit(){var URLarray=window.document.URL.split(\"/\");var URLarrVar=URLarray[URLarray.length-1];var URL_id=URLarrVar.split(\"?\");axios({method:'GET',url:\"\".concat(process.env.REACT_APP_API,\"/user/\").concat(isAuth()._id),headers:{Authorization:\"Bearer \".concat(token)}}).then(function(response){var userId=response.data._id;axios({method:\"POST\",url:process.env.REACT_APP_API+'/user/note/'+URL_id[0],headers:{Authorization:'Bearer '+token},data:{Lesson_id:URL_id[0],title:title,category:category,body:body,User_id:userId,_id:NoteId}}).then(function(response){});});};//form for handling the note changes\nvar takeNotes=function takeNotes(noteBody){return React.createElement(\"form\",null,React.createElement(\"input\",{placeholder:\"Title: \"+title,onChange:handleChange('title'),type:\"text\",name:\"title\",className:\"form-control\",id:\"title\"}),React.createElement(\"input\",{placeholder:\"Category: \"+category,onChange:handleChange('category'),name:\"category\",type:\"text\",className:\"form-control\",id:\"category\"}),React.createElement(\"textarea\",{className:\"note-textbox\",onChange:handleChange('body'),id:\"bodyNotes\",name:\"body\",placeholder:noteBody.body}),React.createElement(\"br\",null),React.createElement(\"button\",{className:\"btn btn-warning\",onClick:function onClick(){return handleSubmitEdit();},type:\"submit\"},\"Save Changes\"));};// what the user is viewing\nreturn React.createElement(Accordion,{defaultActiveKey:\"0\",style:{width:'24rem'}},React.createElement(Card,null,React.createElement(Accordion.Toggle,{as:Card.Header,eventKey:\"0\"},\"View Notes\"),React.createElement(Accordion.Collapse,{eventKey:\"0\"},React.createElement(Card.Body,null,React.createElement(\"div\",null,React.createElement(\"h4\",null,title),React.createElement(\"p\",null,React.createElement(\"i\",null,\"Self-Categorized Topic:  \",category)),React.createElement(\"p\",null,body))))),React.createElement(Card,null,React.createElement(Accordion.Toggle,{as:Card.Header,eventKey:\"1\"},\"Take Notes\"),React.createElement(Accordion.Collapse,{eventKey:\"1\"},React.createElement(Card.Body,null,takeNotes({body:body})))));};export default UserNotes;","map":{"version":3,"sources":["C:/Users/User/Desktop/Project3Lessons/client/src/core/pages/Lesson/UserOptions.js"],"names":["React","useState","useEffect","axios","getCookie","isAuth","Card","Accordion","UserNotes","history","title","category","body","UserId","LessonId","NoteId","showHideEdit","values","setValues","token","loadProfile","handleChange","name","event","bookcategory","target","value","URLarray","window","document","URL","split","URLarrVar","length","URL_id","method","url","process","env","REACT_APP_API","headers","Authorization","then","response","data","notes","map","note","Lesson_id","_id","handleSubmitEdit","userId","User_id","takeNotes","noteBody","width","Header"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\r\n// import Layout from '../core/Layout';\r\nimport axios from 'axios';\r\nimport 'react-toastify/dist/ReactToastify.min.css';\r\nimport { getCookie, isAuth } from '../../../auth/helpers';\r\nimport { Card, Accordion } from 'react-bootstrap'\r\n\r\n\r\nconst UserNotes = ({ history }) => {\r\n    const [values, setValues] = useState({\r\n        title: \"\",\r\n        category: \"\",\r\n        body: \"\",\r\n        UserId: \"\",\r\n        LessonId: \"\",\r\n        NoteId: \"\",\r\n        showHideEdit: false\r\n    });\r\n\r\n    const token = getCookie('token');\r\n\r\n    useEffect(() => {\r\n        loadProfile();\r\n    }, []);\r\n\r\n    const handleChange = (name) => event => {\r\n        setValues({ ...values, title: title, category: category, body: body, bookcategory: bookcategory, [name]: event.target.value })\r\n    }\r\n\r\n    const loadProfile = () => {\r\n        //grabbing the URL from the window\r\n        const URLarray = window.document.URL.split(\"/\")\r\n        const URLarrVar = URLarray[URLarray.length - 1]\r\n        const URL_id = URLarrVar.split(\"?\")\r\n\r\n        //GET the correct logged user\r\n        if (token){\r\n        axios({\r\n            method: 'GET',\r\n            url: `${process.env.REACT_APP_API}/user/${isAuth}`,\r\n            headers: {\r\n                Authorization: `Bearer ${token}`\r\n            }\r\n        })\r\n            .then(response => {\r\n                //set all the values of the user\r\n                if (response.data.notes.length === 0) {\r\n                    //if the user has notes identify if there are notes that belong to this lesson\r\n                } else {\r\n                    response.data.notes.map(note => {\r\n                        if (note.Lesson_id === URL_id[0]) {\r\n\r\n                            setValues({ ...values, NoteId: note._id, title: note.title, category: note.category, body: note.body })\r\n                            //notes that do not belong to this lesson are reported in console.\r\n                        }\r\n                    })\r\n                }\r\n            })\r\n    };\r\n}\r\n\r\n    const { NoteId, title, category, body, bookcategory } = values;\r\n\r\n    //handle all edits to the notes as a POST\r\n    const handleSubmitEdit = () => {\r\n        const URLarray = window.document.URL.split(\"/\")\r\n        const URLarrVar = URLarray[URLarray.length - 1]\r\n        const URL_id = URLarrVar.split(\"?\")\r\n        axios({\r\n            method: 'GET',\r\n            url: `${process.env.REACT_APP_API}/user/${isAuth()._id}`,\r\n            headers: {\r\n                Authorization: `Bearer ${token}`\r\n            }\r\n        })\r\n            .then(response => {\r\n                const userId = response.data._id\r\n                axios({\r\n                    method: \"POST\",\r\n                    url: process.env.REACT_APP_API + '/user/note/' + URL_id[0],\r\n                    headers: {\r\n                        Authorization: 'Bearer ' + token\r\n                    },\r\n                    data: { Lesson_id: URL_id[0], title: title, category: category, body: body, User_id: userId, _id: NoteId }\r\n                }).then(response => {\r\n                })\r\n            })\r\n    }\r\n\r\n    //form for handling the note changes\r\n    const takeNotes = (noteBody) => {\r\n\r\n        return (\r\n        <form>\r\n                    <input placeholder={\"Title: \" + title} onChange={handleChange('title')} type=\"text\" name=\"title\" className=\"form-control\" id=\"title\"></input>\r\n                    <input placeholder={\"Category: \" + category} onChange={handleChange('category')} name=\"category\" type=\"text\" className=\"form-control\" id=\"category\"></input>\r\n                    <textarea className='note-textbox' onChange={handleChange('body')} id=\"bodyNotes\" name=\"body\" placeholder={noteBody.body}></textarea>\r\n                    <br />\r\n                    <button className=\"btn btn-warning\" onClick={() => handleSubmitEdit()} type=\"submit\">Save Changes</button>\r\n        </form>\r\n        )\r\n    }\r\n    // what the user is viewing\r\n    return (\r\n<Accordion defaultActiveKey=\"0\" style={{ width: '24rem'}}>\r\n  <Card>\r\n    <Accordion.Toggle as={Card.Header} eventKey=\"0\">\r\n      View Notes\r\n    </Accordion.Toggle>\r\n    <Accordion.Collapse eventKey=\"0\">\r\n      <Card.Body>\r\n        <div>\r\n            <h4>{title}</h4>\r\n    <p><i>Self-Categorized Topic:  {category}</i></p>\r\n            <p>{body}</p>\r\n        </div>\r\n      </Card.Body>\r\n    </Accordion.Collapse>\r\n  </Card>\r\n  <Card>\r\n    <Accordion.Toggle as={Card.Header} eventKey=\"1\">\r\n      Take Notes\r\n    </Accordion.Toggle>\r\n    <Accordion.Collapse eventKey=\"1\">\r\n      <Card.Body>\r\n          {takeNotes({ body })}\r\n        </Card.Body>\r\n    </Accordion.Collapse>\r\n  </Card>\r\n</Accordion>\r\n    );\r\n};\r\n\r\nexport default UserNotes;"]},"metadata":{},"sourceType":"module"}