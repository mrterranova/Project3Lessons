{"ast":null,"code":"import _defineProperty from\"C:\\\\Users\\\\User\\\\Desktop\\\\Project3Lessons\\\\client\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/defineProperty\";import _objectSpread from\"C:\\\\Users\\\\User\\\\Desktop\\\\Project3Lessons\\\\client\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"C:\\\\Users\\\\User\\\\Desktop\\\\Project3Lessons\\\\client\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";import React,{useState}from'react';import{Redirect}from'react-router-dom';import Layout from\"../core/components/NavigationBar/index\";import axios from'axios';import{ToastContainer,toast}from\"react-toastify\";import'react-toastify/dist/ReactToastify.min.css';import{authenticate,isAuth}from'./helpers';import Google from'./Google';import Facebook from'./Facebook';import'../core/components/Login/style.css';import{Link}from'react-router-dom';var Signin=function Signin(_ref){var history=_ref.history;var _useState=useState({name:'',email:'',password:'',btnText:'Submit'}),_useState2=_slicedToArray(_useState,2),values=_useState2[0],setValues=_useState2[1];var email=values.email,password=values.password,btnText=values.btnText;var handleChange=function handleChange(name){return function(event){setValues(_objectSpread({},values,_defineProperty({},name,event.target.value)));console.log({email:email});};};var informParent=function informParent(response){authenticate(response,function(){isAuth()&&isAuth().role==='admin'?history.push('/admin-dash'):history.push('/private');});};var handleSubmitForm=function handleSubmitForm(event){event.preventDefault();setValues(_objectSpread({},values,{btnText:\"Submitting\"}));axios({method:\"POST\",url:process.env.REACT_APP_API+'/signin',data:{email:email,password:password}}).then(function(response){console.log(\"Signed in!\",response);authenticate(response,function(){setValues(_objectSpread({},values,{name:'',email:'',password:'',btnText:\"Signed In\"}));});isAuth()&&isAuth().role==='admin'?history.push('/admin-dash'):history.push('/private');//save user, token in cookie\nsetValues(_objectSpread({},values,{name:'',email:'',password:'',btnText:\"Signed In\"}));toast.success(\"Hello \".concat(response.data.user.name,\". Welcome back!\"));}).catch(function(error){console.log('Error in Signup',error.response.data);setValues(_objectSpread({},values,{btnText:'Submit'}));toast.error(error.response.data.error);});};var signinForm=function signinForm(){return React.createElement(\"form\",null,React.createElement(\"div\",{className:\"form-group row\"},React.createElement(\"div\",{className:\"col-sm-3\"}),React.createElement(\"div\",{className:\"col-md-6\"},React.createElement(\"label\",{className:\"text-muted login-email-label\"},\"Email: \"),React.createElement(\"input\",{className:\"login-email-field form-control\",onChange:handleChange('email'),value:email,type:\"email\"}))),React.createElement(\"div\",{className:\"form-group row\"},React.createElement(\"div\",{className:\"col-sm-3\"}),React.createElement(\"div\",{className:\"col-md-6\"},React.createElement(\"label\",{className:\"text-muted login-password-label\"},\"Password: \"),React.createElement(\"br\",null),React.createElement(\"input\",{className:\"login-password-field form-control\",onChange:handleChange('password'),value:password,type:\"password\"}))),React.createElement(\"div\",null,React.createElement(\"div\",{className:\"form-group row\"},React.createElement(\"div\",{className:\"col-sm-3\"}),React.createElement(\"button\",{className:\"btn btn-default btn-tab\",onClick:handleSubmitForm,type:\"submit\"},btnText))));};return React.createElement(Layout,null,React.createElement(ToastContainer,null),isAuth()?React.createElement(Redirect,{to:\"/\"}):null,React.createElement(\"h1\",{className:\"Signin-pg\"},\"Login\"),signinForm(),React.createElement(\"div\",{className:\"forgot-password-link\"},React.createElement(Link,{to:\"/auth/password/update\",className:\"nav-link\"},\"...click here if you forgot your password\")),React.createElement(\"div\",null,React.createElement(\"h4\",{className:\"Signin-secondary-auth\"},\"Or you can signin with...\"),React.createElement(\"div\",{className:\"social-media-comtainer row\"},React.createElement(\"div\",{className:\"col-md-3\"}),React.createElement(\"div\",{className:\"social-media-container-2 col-md-6\"},React.createElement(Google,{informParent:informParent}))),React.createElement(\"div\",{className:\"social-media-comtainer row\"},React.createElement(\"div\",{className:\"col-md-3\"}),React.createElement(\"div\",{className:\"social-media-container-2 col-md-6\"},React.createElement(Facebook,{informParent:informParent})))));};export default Signin;","map":{"version":3,"sources":["C:/Users/User/Desktop/Project3Lessons/client/src/auth/Signin.js"],"names":["React","useState","Redirect","Layout","axios","ToastContainer","toast","authenticate","isAuth","Google","Facebook","Link","Signin","history","name","email","password","btnText","values","setValues","handleChange","event","target","value","console","log","informParent","response","role","push","handleSubmitForm","preventDefault","method","url","process","env","REACT_APP_API","data","then","success","user","catch","error","signinForm"],"mappings":"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","sourcesContent":["import React, { useState } from 'react';\r\nimport { Redirect } from 'react-router-dom';\r\nimport Layout from \"../core/components/NavigationBar/index\";\r\nimport axios from 'axios';\r\nimport { ToastContainer, toast } from \"react-toastify\";\r\nimport 'react-toastify/dist/ReactToastify.min.css';\r\nimport { authenticate, isAuth } from './helpers';\r\nimport Google from './Google'\r\nimport Facebook from './Facebook'\r\nimport '../core/components/Login/style.css'\r\nimport { Link } from 'react-router-dom';\r\n\r\nconst Signin = ({ history }) => {\r\n    const [values, setValues] = useState({\r\n        name: '',\r\n        email: '',\r\n        password: '',\r\n        btnText: 'Submit'\r\n    })\r\n\r\n    const { email, password, btnText } = values\r\n\r\n    const handleChange = (name) => event => {\r\n        setValues({ ...values, [name]: event.target.value })\r\n        console.log({ email })\r\n    }\r\n\r\n    const informParent = response => {\r\n        authenticate(response, () => {\r\n            isAuth() && isAuth().role === 'admin' ? history.push('/admin-dash') : history.push('/private');\r\n        });\r\n    };\r\n\r\n    const handleSubmitForm = event => {\r\n        event.preventDefault();\r\n        setValues({ ...values, btnText: \"Submitting\" })\r\n        axios({\r\n            method: \"POST\",\r\n            url: process.env.REACT_APP_API + '/signin',\r\n            data: { email, password }\r\n        }).then(response => {\r\n            console.log(\"Signed in!\", response)\r\n\r\n            authenticate(response, () => {\r\n                setValues({ ...values, name: '', email: '', password: '', btnText: \"Signed In\" });\r\n            })\r\n\r\n            isAuth() && isAuth().role === 'admin' ? history.push('/admin-dash') : history.push('/private');\r\n\r\n            //save user, token in cookie\r\n            setValues({ ...values, name: '', email: '', password: '', btnText: \"Signed In\" });\r\n            toast.success(`Hello ${response.data.user.name}. Welcome back!`)\r\n        }).catch(error => {\r\n            console.log('Error in Signup', error.response.data)\r\n            setValues({ ...values, btnText: 'Submit' });\r\n            toast.error(error.response.data.error)\r\n        })\r\n    }\r\n\r\n\r\n    const signinForm = () => (\r\n        <form>\r\n                <div className=\"form-group row\" >\r\n                    <div className=\"col-sm-3\"></div>\r\n                    <div className=\"col-md-6\">\r\n                        <label className=\"text-muted login-email-label\">Email: </label>\r\n                        <input className=\"login-email-field form-control\" onChange={handleChange('email')} value={email} type=\"email\" />\r\n                    </div>\r\n                </div>\r\n                <div className=\"form-group row\" >\r\n                    <div className=\"col-sm-3\"></div>\r\n                    <div className=\"col-md-6\">\r\n                        <label className=\"text-muted login-password-label\">Password: </label>\r\n                        <br />\r\n                        <input className=\"login-password-field form-control\" onChange={handleChange('password')} value={password} type=\"password\" />\r\n                    </div>\r\n                </div>\r\n                <div>\r\n                    <div className=\"form-group row\" >\r\n                        <div className=\"col-sm-3\"></div>\r\n                        <button className=\"btn btn-default btn-tab\" onClick={handleSubmitForm} type=\"submit\">{btnText}</button>\r\n                    </div>\r\n            </div>\r\n        </form>\r\n    )\r\n\r\n    return (\r\n        <Layout>\r\n            <ToastContainer />\r\n            {isAuth() ? <Redirect to=\"/\" /> : null}\r\n            <h1 className=\"Signin-pg\">Login</h1>\r\n            {signinForm()}\r\n            <div className=\"forgot-password-link\">\r\n                <Link to=\"/auth/password/update\" className=\"nav-link\">...click here if you forgot your password</Link>\r\n                </div>\r\n            <div>\r\n                <h4 className=\"Signin-secondary-auth\">Or you can signin with...</h4>\r\n                <div className=\"social-media-comtainer row\">\r\n                    <div className=\"col-md-3\"></div>\r\n                    <div className=\"social-media-container-2 col-md-6\">\r\n                <Google  informParent={informParent} />\r\n                </div>\r\n                </div>\r\n                <div className=\"social-media-comtainer row\">\r\n                    <div className=\"col-md-3\"></div>\r\n                    <div className=\"social-media-container-2 col-md-6\">\r\n                <Facebook informParent={ informParent} />\r\n                </div>\r\n                </div>\r\n            </div>\r\n        </Layout>\r\n    )\r\n}\r\n\r\nexport default Signin;"]},"metadata":{},"sourceType":"module"}