{"ast":null,"code":"import _objectSpread from\"C:\\\\Users\\\\User\\\\Desktop\\\\Project3Lessons\\\\client\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"C:\\\\Users\\\\User\\\\Desktop\\\\Project3Lessons\\\\client\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from'react';import jwt from'jsonwebtoken';import Layout from'../core/components/NavigationBar/index';import axios from'axios';import{ToastContainer,toast}from'react-toastify';import'react-toastify/dist/ReactToastify.min.css';var Reset=function Reset(_ref){var match=_ref.match;// props.match from react router dom\nvar _useState=useState({name:'',token:'',newPassword:'',buttonText:'Submit Reset'}),_useState2=_slicedToArray(_useState,2),values=_useState2[0],setValues=_useState2[1];useEffect(function(){var token=match.params.token;var _jwt$decode=jwt.decode(token),name=_jwt$decode.name;if(token){setValues(_objectSpread({},values,{name:name,token:token}));}},[values,match.params.token]);var name=values.name,email=values.email,token=values.token,newPassword=values.newPassword,buttonText=values.buttonText;var handleChange=function handleChange(event){setValues(_objectSpread({},values,{newPassword:event.target.value}));};var clickSubmit=function clickSubmit(event){event.preventDefault();setValues(_objectSpread({},values,{buttonText:'Updating Password'}));axios({method:'PUT',url:\"\".concat(process.env.REACT_APP_API,\"/reset-password\"),data:{newPassword:newPassword,resetPasswordLink:token}}).then(function(response){console.log('RESET PASSWORD SUCCESS',response);toast.success(response.data.message);setValues(_objectSpread({},values,{buttonText:'Reset Completed'}));}).catch(function(error){console.log('RESET PASSWORD ERROR',error.response.data);toast.error(error.response.data.error);setValues(_objectSpread({},values,{buttonText:'Submit Reset'}));});};var resetPasswordForm=function resetPasswordForm(){return React.createElement(\"form\",null,React.createElement(\"div\",{className:\"form-group\"},React.createElement(\"label\",{className:\"text-muted\"},\"New Password:\"),React.createElement(\"input\",{onChange:handleChange,value:newPassword,placeholder:\"Place New Password\",type:\"password\",className:\"form-control\",required:true})),React.createElement(\"div\",null,React.createElement(\"button\",{className:\"btn btn-primary\",onClick:clickSubmit},buttonText)));};return React.createElement(Layout,null,React.createElement(\"div\",{className:\"col-md-6 offset-md-3\"},React.createElement(ToastContainer,null),React.createElement(\"h1\",null,\"Reseting Password for \",name,\":\"),React.createElement(\"h6\",null,\"Recieved from \",email),resetPasswordForm()));};export default Reset;","map":{"version":3,"sources":["C:/Users/User/Desktop/Project3Lessons/client/src/auth/ResetPassword.js"],"names":["React","useState","useEffect","jwt","Layout","axios","ToastContainer","toast","Reset","match","name","token","newPassword","buttonText","values","setValues","params","decode","email","handleChange","event","target","value","clickSubmit","preventDefault","method","url","process","env","REACT_APP_API","data","resetPasswordLink","then","response","console","log","success","message","catch","error","resetPasswordForm"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport jwt from 'jsonwebtoken';\r\nimport Layout from '../core/components/NavigationBar/index';\r\nimport axios from 'axios';\r\nimport { ToastContainer, toast } from 'react-toastify';\r\nimport 'react-toastify/dist/ReactToastify.min.css';\r\n\r\nconst Reset = ({ match }) => {\r\n    // props.match from react router dom\r\n    const [values, setValues] = useState({\r\n        name: '',\r\n        token: '',\r\n        newPassword: '',\r\n        buttonText: 'Submit Reset'\r\n    });\r\n\r\n    useEffect(() => {\r\n        let token = match.params.token;\r\n        let { name } = jwt.decode(token);\r\n        if (token) {\r\n            setValues({ ...values, name, token });\r\n        }\r\n    }, [values, match.params.token]);\r\n\r\n    const { name, email, token, newPassword, buttonText } = values;\r\n\r\n    const handleChange = event => {\r\n        setValues({ ...values, newPassword: event.target.value });\r\n    };\r\n\r\n    const clickSubmit = event => {\r\n        event.preventDefault();\r\n        setValues({ ...values, buttonText: 'Updating Password' });\r\n        axios({\r\n            method: 'PUT',\r\n            url: `${process.env.REACT_APP_API}/reset-password`,\r\n            data: { newPassword, resetPasswordLink: token }\r\n        })\r\n            .then(response => {\r\n                console.log('RESET PASSWORD SUCCESS', response);\r\n                toast.success(response.data.message);\r\n                setValues({ ...values, buttonText: 'Reset Completed' });\r\n            })\r\n            .catch(error => {\r\n                console.log('RESET PASSWORD ERROR', error.response.data);\r\n                toast.error(error.response.data.error);\r\n                setValues({ ...values, buttonText: 'Submit Reset' });\r\n            });\r\n    };\r\n\r\n    const resetPasswordForm = () => (\r\n        <form>\r\n            <div className=\"form-group\">\r\n                <label className=\"text-muted\">New Password:</label>\r\n                <input\r\n                    onChange={handleChange}\r\n                    value={newPassword} placeholder=\"Place New Password\" type=\"password\" className=\"form-control\" required />\r\n            </div>\r\n\r\n            <div>\r\n                <button className=\"btn btn-primary\" onClick={clickSubmit}>\r\n                    {buttonText}\r\n                </button>\r\n            </div>\r\n        </form>\r\n    );\r\n\r\n    return (\r\n        <Layout>\r\n            <div className=\"col-md-6 offset-md-3\">\r\n                <ToastContainer />\r\n                <h1>Reseting Password for {name}:</h1>\r\n                <h6>Recieved from {email}</h6>\r\n                {resetPasswordForm()}\r\n            </div>\r\n        </Layout>\r\n    );\r\n};\r\n\r\nexport default Reset;"]},"metadata":{},"sourceType":"module"}