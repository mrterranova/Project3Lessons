{"ast":null,"code":"import _objectSpread from\"C:\\\\Users\\\\User\\\\Desktop\\\\Project3Lessons\\\\client\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"C:\\\\Users\\\\User\\\\Desktop\\\\Project3Lessons\\\\client\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from'react';// import Layout from '../core/Layout';\nimport axios from'axios';import{isAuth,getCookie,signout}from'../../../auth/helpers';import'react-toastify/dist/ReactToastify.min.css';import Layout from'../../components/NavigationBar/index';import'./style.css';import Settings from'./components/UserSettings/Modal';import Container from'./components/ProfileContainer';var Private=function Private(_ref){var history=_ref.history;var _useState=useState({name:\"\",email:\"\"}),_useState2=_slicedToArray(_useState,2),values=_useState2[0],setValues=_useState2[1];var token=getCookie('token');useEffect(function(){loadProfile();},[]);var loadProfile=function loadProfile(){axios({method:'GET',url:\"\".concat(process.env.REACT_APP_API,\"/user/\").concat(isAuth()._id),headers:{Authorization:\"Bearer \".concat(token)}}).then(function(response){var _response$data=response.data,role=_response$data.role,name=_response$data.name,email=_response$data.email;setValues(_objectSpread({},values,{role:role,name:name,email:email}));}).catch(function(error){console.log('PRIVATE PROFILE UPDATE ERROR',error.response.data.error);if(error.response.status===401){signout(function(){history.push('/');});}});};var name=values.name;return React.createElement(Layout,null,React.createElement(Settings,null),React.createElement(\"div\",{className:\"col-md-6 offset-md-3\"},React.createElement(\"h1\",{className:\"pt-5 text-center\"},\"Welcome Back, \",name,\"!\"),React.createElement(\"p\",{className:\"lead text-center\"})),React.createElement(Container,null));};export default Private;","map":{"version":3,"sources":["C:/Users/User/Desktop/Project3Lessons/client/src/core/pages/Private/Private.js"],"names":["React","useState","useEffect","axios","isAuth","getCookie","signout","Layout","Settings","Container","Private","history","name","email","values","setValues","token","loadProfile","method","url","process","env","REACT_APP_API","_id","headers","Authorization","then","response","data","role","catch","error","console","log","status","push"],"mappings":"6QAAA,MAAOA,CAAAA,KAAP,EAAgBC,QAAhB,CAA0BC,SAA1B,KAA2C,OAA3C,CACA;AACA,MAAOC,CAAAA,KAAP,KAAkB,OAAlB,CACA,OAASC,MAAT,CAAiBC,SAAjB,CAA4BC,OAA5B,KAA2C,uBAA3C,CACA,MAAO,2CAAP,CACA,MAAOC,CAAAA,MAAP,KAAmB,sCAAnB,CACA,MAAO,aAAP,CACA,MAAOC,CAAAA,QAAP,KAAqB,iCAArB,CACA,MAAOC,CAAAA,SAAP,KAAsB,+BAAtB,CAEA,GAAMC,CAAAA,OAAO,CAAG,QAAVA,CAAAA,OAAU,MAAiB,IAAdC,CAAAA,OAAc,MAAdA,OAAc,eACDV,QAAQ,CAAC,CACjCW,IAAI,CAAE,EAD2B,CAEjCC,KAAK,CAAC,EAF2B,CAAD,CADP,wCACtBC,MADsB,eACdC,SADc,eAM7B,GAAMC,CAAAA,KAAK,CAAGX,SAAS,CAAC,OAAD,CAAvB,CAEAH,SAAS,CAAC,UAAM,CACZe,WAAW,GACd,CAFQ,CAEN,EAFM,CAAT,CAIA,GAAMA,CAAAA,WAAW,CAAG,QAAdA,CAAAA,WAAc,EAAM,CACtBd,KAAK,CAAC,CACFe,MAAM,CAAE,KADN,CAEFC,GAAG,WAAKC,OAAO,CAACC,GAAR,CAAYC,aAAjB,kBAAuClB,MAAM,GAAGmB,GAAhD,CAFD,CAGFC,OAAO,CAAE,CACLC,aAAa,kBAAYT,KAAZ,CADR,CAHP,CAAD,CAAL,CAOKU,IAPL,CAOU,SAAAC,QAAQ,CAAI,oBACgBA,QAAQ,CAACC,IADzB,CACNC,IADM,gBACNA,IADM,CACAjB,IADA,gBACAA,IADA,CACMC,KADN,gBACMA,KADN,CAEdE,SAAS,kBAAMD,MAAN,EAAce,IAAI,CAAJA,IAAd,CAAoBjB,IAAI,CAAJA,IAApB,CAA0BC,KAAK,CAALA,KAA1B,GAAT,CACH,CAVL,EAWKiB,KAXL,CAWW,SAAAC,KAAK,CAAI,CACZC,OAAO,CAACC,GAAR,CAAY,8BAAZ,CAA4CF,KAAK,CAACJ,QAAN,CAAeC,IAAf,CAAoBG,KAAhE,EACA,GAAIA,KAAK,CAACJ,QAAN,CAAeO,MAAf,GAA0B,GAA9B,CAAmC,CAC/B5B,OAAO,CAAC,UAAM,CACVK,OAAO,CAACwB,IAAR,CAAa,GAAb,EACH,CAFM,CAAP,CAGH,CACJ,CAlBL,EAmBH,CApBD,CAZ6B,GAkCtBvB,CAAAA,IAlCsB,CAkCbE,MAlCa,CAkCtBF,IAlCsB,CAoC7B,MACI,qBAAC,MAAD,MACI,oBAAC,QAAD,MADJ,CAEI,2BAAK,SAAS,CAAC,sBAAf,EACI,0BAAI,SAAS,CAAC,kBAAd,mBAAgDA,IAAhD,KADJ,CAEI,yBAAG,SAAS,CAAC,kBAAb,EAFJ,CAFJ,CAMI,oBAAC,SAAD,MANJ,CADJ,CAUH,CA9CD,CAgDA,cAAeF,CAAAA,OAAf","sourcesContent":["import React, { useState, useEffect } from 'react';\r\n// import Layout from '../core/Layout';\r\nimport axios from 'axios';\r\nimport { isAuth, getCookie, signout } from '../../../auth/helpers';\r\nimport 'react-toastify/dist/ReactToastify.min.css';\r\nimport Layout from '../../components/NavigationBar/index';\r\nimport './style.css';\r\nimport Settings from './components/UserSettings/Modal'\r\nimport Container from './components/ProfileContainer'\r\n\r\nconst Private = ({ history }) => {\r\n    const [values, setValues] = useState({\r\n        name: \"\", \r\n        email:\"\"\r\n    });\r\n\r\n    const token = getCookie('token');\r\n\r\n    useEffect(() => {\r\n        loadProfile();\r\n    }, []);\r\n\r\n    const loadProfile = () => {\r\n        axios({\r\n            method: 'GET',\r\n            url: `${process.env.REACT_APP_API}/user/${isAuth()._id}`,\r\n            headers: {\r\n                Authorization: `Bearer ${token}`\r\n            }\r\n        })\r\n            .then(response => {\r\n                const { role, name, email } = response.data;\r\n                setValues({ ...values, role, name, email });\r\n            })\r\n            .catch(error => {\r\n                console.log('PRIVATE PROFILE UPDATE ERROR', error.response.data.error);\r\n                if (error.response.status === 401) {\r\n                    signout(() => {\r\n                        history.push('/');\r\n                    });\r\n                }\r\n            });\r\n    };\r\n\r\n    const {name } = values;\r\n\r\n    return (\r\n        <Layout>\r\n            <Settings />\r\n            <div className=\"col-md-6 offset-md-3\">\r\n                <h1 className=\"pt-5 text-center\">Welcome Back, {name}!</h1>\r\n                <p className=\"lead text-center\"></p>\r\n            </div>\r\n            <Container />\r\n        </Layout>\r\n    );\r\n};\r\n\r\nexport default Private;\r\n"]},"metadata":{},"sourceType":"module"}