{"ast":null,"code":"function getEntityAtOffset(block, offset) {\n  let entityKey = block.getEntityAt(offset);\n\n  if (entityKey == null) {\n    return null;\n  }\n\n  let startOffset = offset;\n\n  while (startOffset > 0 && block.getEntityAt(startOffset - 1) === entityKey) {\n    startOffset -= 1;\n  }\n\n  let endOffset = startOffset;\n  let blockLength = block.getLength();\n\n  while (endOffset < blockLength && block.getEntityAt(endOffset + 1) === entityKey) {\n    endOffset += 1;\n  }\n\n  return {\n    entityKey,\n    blockKey: block.getKey(),\n    startOffset,\n    endOffset: endOffset + 1\n  };\n}\n\nexport default function getEntityAtCursor(editorState) {\n  let selection = editorState.getSelection();\n  let startKey = selection.getStartKey();\n  let startBlock = editorState.getCurrentContent().getBlockForKey(startKey);\n  let startOffset = selection.getStartOffset();\n\n  if (selection.isCollapsed()) {\n    // Get the entity before the cursor (unless the cursor is at the start).\n    return getEntityAtOffset(startBlock, startOffset === 0 ? startOffset : startOffset - 1);\n  }\n\n  if (startKey !== selection.getEndKey()) {\n    return null;\n  }\n\n  let endOffset = selection.getEndOffset();\n  let startEntityKey = startBlock.getEntityAt(startOffset);\n\n  for (let i = startOffset; i < endOffset; i++) {\n    let entityKey = startBlock.getEntityAt(i);\n\n    if (entityKey == null || entityKey !== startEntityKey) {\n      return null;\n    }\n  }\n\n  return {\n    entityKey: startEntityKey,\n    blockKey: startBlock.getKey(),\n    startOffset: startOffset,\n    endOffset: endOffset\n  };\n}","map":{"version":3,"sources":["C:/Users/User/Desktop/MERN Passport/client/src/core/pages/Admin/components/lib/getEntityAtCursor.js"],"names":["getEntityAtOffset","block","offset","entityKey","getEntityAt","startOffset","endOffset","blockLength","getLength","blockKey","getKey","getEntityAtCursor","editorState","selection","getSelection","startKey","getStartKey","startBlock","getCurrentContent","getBlockForKey","getStartOffset","isCollapsed","getEndKey","getEndOffset","startEntityKey","i"],"mappings":"AAUA,SAASA,iBAAT,CAA2BC,KAA3B,EAAgDC,MAAhD,EAAoF;AAClF,MAAIC,SAAS,GAAGF,KAAK,CAACG,WAAN,CAAkBF,MAAlB,CAAhB;;AACA,MAAIC,SAAS,IAAI,IAAjB,EAAuB;AACrB,WAAO,IAAP;AACD;;AACD,MAAIE,WAAW,GAAGH,MAAlB;;AACA,SAAOG,WAAW,GAAG,CAAd,IAAmBJ,KAAK,CAACG,WAAN,CAAkBC,WAAW,GAAG,CAAhC,MAAuCF,SAAjE,EAA4E;AAC1EE,IAAAA,WAAW,IAAI,CAAf;AACD;;AACD,MAAIC,SAAS,GAAGD,WAAhB;AACA,MAAIE,WAAW,GAAGN,KAAK,CAACO,SAAN,EAAlB;;AACA,SAAOF,SAAS,GAAGC,WAAZ,IAA2BN,KAAK,CAACG,WAAN,CAAkBE,SAAS,GAAG,CAA9B,MAAqCH,SAAvE,EAAkF;AAChFG,IAAAA,SAAS,IAAI,CAAb;AACD;;AACD,SAAO;AACLH,IAAAA,SADK;AAELM,IAAAA,QAAQ,EAAER,KAAK,CAACS,MAAN,EAFL;AAGLL,IAAAA,WAHK;AAILC,IAAAA,SAAS,EAAEA,SAAS,GAAG;AAJlB,GAAP;AAMD;;AAED,eAAe,SAASK,iBAAT,CAA2BC,WAA3B,EAAyE;AACtF,MAAIC,SAAS,GAAGD,WAAW,CAACE,YAAZ,EAAhB;AACA,MAAIC,QAAQ,GAAGF,SAAS,CAACG,WAAV,EAAf;AACA,MAAIC,UAAU,GAAGL,WAAW,CAACM,iBAAZ,GAAgCC,cAAhC,CAA+CJ,QAA/C,CAAjB;AACA,MAAIV,WAAW,GAAGQ,SAAS,CAACO,cAAV,EAAlB;;AACA,MAAIP,SAAS,CAACQ,WAAV,EAAJ,EAA6B;AAC3B;AACA,WAAOrB,iBAAiB,CAACiB,UAAD,EAAaZ,WAAW,KAAK,CAAhB,GAAoBA,WAApB,GAAkCA,WAAW,GAAG,CAA7D,CAAxB;AACD;;AACD,MAAIU,QAAQ,KAAKF,SAAS,CAACS,SAAV,EAAjB,EAAwC;AACtC,WAAO,IAAP;AACD;;AACD,MAAIhB,SAAS,GAAGO,SAAS,CAACU,YAAV,EAAhB;AACA,MAAIC,cAAc,GAAGP,UAAU,CAACb,WAAX,CAAuBC,WAAvB,CAArB;;AACA,OAAK,IAAIoB,CAAC,GAAGpB,WAAb,EAA0BoB,CAAC,GAAGnB,SAA9B,EAAyCmB,CAAC,EAA1C,EAA8C;AAC5C,QAAItB,SAAS,GAAGc,UAAU,CAACb,WAAX,CAAuBqB,CAAvB,CAAhB;;AACA,QAAItB,SAAS,IAAI,IAAb,IAAqBA,SAAS,KAAKqB,cAAvC,EAAuD;AACrD,aAAO,IAAP;AACD;AACF;;AACD,SAAO;AACLrB,IAAAA,SAAS,EAAEqB,cADN;AAELf,IAAAA,QAAQ,EAAEQ,UAAU,CAACP,MAAX,EAFL;AAGLL,IAAAA,WAAW,EAAEA,WAHR;AAILC,IAAAA,SAAS,EAAEA;AAJN,GAAP;AAMD","sourcesContent":["/* @flow */\nimport type {EditorState, ContentBlock} from 'draft-js';\n\nexport type EntityDescription = {\n  entityKey: string;\n  blockKey: string;\n  startOffset: number;\n  endOffset: number;\n};\n\nfunction getEntityAtOffset(block: ContentBlock, offset: number): ?EntityDescription {\n  let entityKey = block.getEntityAt(offset);\n  if (entityKey == null) {\n    return null;\n  }\n  let startOffset = offset;\n  while (startOffset > 0 && block.getEntityAt(startOffset - 1) === entityKey) {\n    startOffset -= 1;\n  }\n  let endOffset = startOffset;\n  let blockLength = block.getLength();\n  while (endOffset < blockLength && block.getEntityAt(endOffset + 1) === entityKey) {\n    endOffset += 1;\n  }\n  return {\n    entityKey,\n    blockKey: block.getKey(),\n    startOffset,\n    endOffset: endOffset + 1,\n  };\n}\n\nexport default function getEntityAtCursor(editorState: EditorState): ?EntityDescription {\n  let selection = editorState.getSelection();\n  let startKey = selection.getStartKey();\n  let startBlock = editorState.getCurrentContent().getBlockForKey(startKey);\n  let startOffset = selection.getStartOffset();\n  if (selection.isCollapsed()) {\n    // Get the entity before the cursor (unless the cursor is at the start).\n    return getEntityAtOffset(startBlock, startOffset === 0 ? startOffset : startOffset - 1);\n  }\n  if (startKey !== selection.getEndKey()) {\n    return null;\n  }\n  let endOffset = selection.getEndOffset();\n  let startEntityKey = startBlock.getEntityAt(startOffset);\n  for (let i = startOffset; i < endOffset; i++) {\n    let entityKey = startBlock.getEntityAt(i);\n    if (entityKey == null || entityKey !== startEntityKey) {\n      return null;\n    }\n  }\n  return {\n    entityKey: startEntityKey,\n    blockKey: startBlock.getKey(),\n    startOffset: startOffset,\n    endOffset: endOffset,\n  };\n}\n"]},"metadata":{},"sourceType":"module"}