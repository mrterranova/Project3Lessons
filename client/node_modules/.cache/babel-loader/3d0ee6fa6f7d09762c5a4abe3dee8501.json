{"ast":null,"code":"import _objectSpread from \"C:\\\\Users\\\\User\\\\Desktop\\\\MERN Passport\\\\client\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread2\";\nimport _slicedToArray from \"C:\\\\Users\\\\User\\\\Desktop\\\\MERN Passport\\\\client\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"C:\\\\Users\\\\User\\\\Desktop\\\\MERN Passport\\\\client\\\\src\\\\core\\\\pages\\\\Lesson\\\\UserBookmark.js\";\nimport React, { useState, useEffect, Fragment } from 'react'; // import Layout from '../core/Layout';\n\nimport axios from 'axios';\nimport 'react-toastify/dist/ReactToastify.min.css';\nimport { isAuth, getCookie } from '../../../auth/helpers';\nimport './style.css';\n\nconst UserBookmark = ({\n  history\n}) => {\n  const _useState = useState({\n    lessonName: \"\",\n    UserId: \"\",\n    LessonId: \"\",\n    BookmarkId: \"\",\n    isBookmarked: false\n  }),\n        _useState2 = _slicedToArray(_useState, 2),\n        values = _useState2[0],\n        setValues = _useState2[1];\n\n  const token = getCookie('token');\n  useEffect(() => {\n    loadProfile();\n  }, []);\n\n  const handleChange = name => event => {\n    setValues(_objectSpread({}, values, {\n      lesson_title: lessonName,\n      [name]: event.target.value\n    }));\n  };\n\n  const loadProfile = () => {\n    //grabbing the URL from the window\n    const URLarray = window.document.URL.split(\"/\");\n    const URLarrVar = URLarray[URLarray.length - 1];\n    const URL_id = URLarrVar.split(\"?\"); //GET the correct logged user\n\n    axios({\n      method: 'GET',\n      url: `${process.env.REACT_APP_API}/user/${isAuth()._id}`,\n      headers: {\n        Authorization: `Bearer ${token}`\n      }\n    }).then(response => {\n      //set all the values of the user\n      if (response.data.notes.length === 0) {//if the user has notes identify if there is a bookmark that belong to this lesson\n      } else {\n        response.data.bookmarks.map(bookmark => {\n          if (bookmark.Lesson_id === URL_id[0]) {\n            setValues(_objectSpread({}, values, {\n              BookmarkId: bookmark._id,\n              isBookmarked: true\n            }));\n          }\n        });\n      }\n    });\n  };\n\n  const BookmarkId = values.BookmarkId,\n        isBookmarked = values.isBookmarked,\n        lessonName = values.lessonName; //handle all edits to the bookmark as a POST\n\n  const postBookmark = () => {\n    const URLarray = window.document.URL.split(\"/\");\n    const URLarrVar = URLarray[URLarray.length - 1];\n    const URL_id = URLarrVar.split(\"?\");\n    axios({\n      method: 'GET',\n      url: `${process.env.REACT_APP_API}/user/${isAuth()._id}`,\n      headers: {\n        Authorization: `Bearer ${token}`\n      }\n    }).then(response => {\n      const userId = response.data._id;\n      axios({\n        method: 'GET',\n        url: process.env.REACT_APP_API + '/lesson/' + URL_id\n      }).then(res => {\n        const lessonTitle = res.data.title;\n        axios({\n          method: \"POST\",\n          url: process.env.REACT_APP_API + '/user/bookmarks/' + URL_id[0],\n          headers: {\n            Authorization: 'Bearer ' + token\n          },\n          data: {\n            User_id: userId,\n            Lesson_id: URL_id[0],\n            lesson_title: lessonTitle,\n            data: Date()\n          }\n        }).then(response => {\n          console.log(\"YOU ARE NOW IN BOOKMARK\");\n          console.log(response);\n        });\n      });\n    });\n  };\n\n  function Image() {\n    if (isBookmarked) {\n      console.log('you made it', isBookmarked);\n      return React.createElement(\"img\", {\n        src: '/images/bookmark-ribbon.png',\n        id: \"bookmark-lesson\",\n        alt: \"bookmark\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 97\n        },\n        __self: this\n      });\n    } else {\n      console.log('nope', isBookmarked);\n      return \"\";\n    }\n  } // what the user is viewing\n\n\n  return React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 106\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    id: \"btn-bookmark\",\n    onClick: () => postBookmark(),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 107\n    },\n    __self: this\n  }, \"Bookmark\"), React.createElement(\"div\", {\n    classname: \"bookmark-container\",\n    style: {\n      width: '100px',\n      height: '250px',\n      backgroundColor: \"red\",\n      position: 'absolute',\n      marginLeft: '80%',\n      marginTop: '-100px'\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 108\n    },\n    __self: this\n  }, React.createElement(Image, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 109\n    },\n    __self: this\n  })));\n};\n\nexport default UserBookmark;","map":{"version":3,"sources":["C:/Users/User/Desktop/MERN Passport/client/src/core/pages/Lesson/UserBookmark.js"],"names":["React","useState","useEffect","Fragment","axios","isAuth","getCookie","UserBookmark","history","lessonName","UserId","LessonId","BookmarkId","isBookmarked","values","setValues","token","loadProfile","handleChange","name","event","lesson_title","target","value","URLarray","window","document","URL","split","URLarrVar","length","URL_id","method","url","process","env","REACT_APP_API","_id","headers","Authorization","then","response","data","notes","bookmarks","map","bookmark","Lesson_id","postBookmark","userId","res","lessonTitle","title","User_id","Date","console","log","Image","width","height","backgroundColor","position","marginLeft","marginTop"],"mappings":"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","sourcesContent":["import React, { useState, useEffect, Fragment } from 'react';\r\n// import Layout from '../core/Layout';\r\nimport axios from 'axios';\r\nimport 'react-toastify/dist/ReactToastify.min.css';\r\nimport { isAuth, getCookie } from '../../../auth/helpers';\r\nimport './style.css'\r\n\r\n\r\nconst UserBookmark = ({ history }) => {\r\n    const [values, setValues] = useState({\r\n        lessonName:\"\",\r\n        UserId: \"\",\r\n        LessonId: \"\",\r\n        BookmarkId: \"\", \r\n        isBookmarked: false\r\n    });\r\n\r\n    const token = getCookie('token');\r\n\r\n    useEffect(() => {\r\n        loadProfile();\r\n    }, []);\r\n\r\n    const handleChange = (name) => event => {\r\n        setValues({ ...values, lesson_title: lessonName,  [name]: event.target.value })\r\n    }\r\n\r\n    const loadProfile = () => {\r\n        //grabbing the URL from the window\r\n        const URLarray = window.document.URL.split(\"/\")\r\n        const URLarrVar = URLarray[URLarray.length - 1]\r\n        const URL_id = URLarrVar.split(\"?\")\r\n\r\n        //GET the correct logged user\r\n        axios({\r\n            method: 'GET',\r\n            url: `${process.env.REACT_APP_API}/user/${isAuth()._id}`,\r\n            headers: {\r\n                Authorization: `Bearer ${token}`\r\n            }\r\n        })\r\n            .then(response => {\r\n                //set all the values of the user\r\n                if (response.data.notes.length === 0) {\r\n                    //if the user has notes identify if there is a bookmark that belong to this lesson\r\n                } else {\r\n                    response.data.bookmarks.map(bookmark => {\r\n                        if (bookmark.Lesson_id === URL_id[0]) {\r\n                            setValues({ ...values, BookmarkId:bookmark._id, isBookmarked: true })\r\n                            \r\n                        }\r\n                    })\r\n                }\r\n\r\n            })\r\n    };\r\n\r\n    const { BookmarkId, isBookmarked, lessonName,  } = values;\r\n\r\n    //handle all edits to the bookmark as a POST\r\n    const postBookmark = () => {\r\n        const URLarray = window.document.URL.split(\"/\")\r\n        const URLarrVar = URLarray[URLarray.length - 1]\r\n        const URL_id = URLarrVar.split(\"?\")\r\n        axios({\r\n            method: 'GET',\r\n            url: `${process.env.REACT_APP_API}/user/${isAuth()._id}`,\r\n            headers: {\r\n                Authorization: `Bearer ${token}`\r\n            }\r\n        })\r\n            .then(response => {\r\n                const userId = response.data._id\r\n                axios({\r\n                    method: 'GET',\r\n                    url:process.env.REACT_APP_API+'/lesson/'+URL_id\r\n                }).then( res => {\r\n                    const lessonTitle = res.data.title\r\n                    axios({\r\n                        method: \"POST\",\r\n                        url: process.env.REACT_APP_API + '/user/bookmarks/' + URL_id[0],\r\n                        headers: {\r\n                            Authorization: 'Bearer ' + token\r\n                        },\r\n                        data: { User_id: userId, Lesson_id: URL_id[0], lesson_title: lessonTitle, data: Date() }\r\n                    }).then(response => {\r\n                        console.log(\"YOU ARE NOW IN BOOKMARK\")\r\n                        console.log(response)\r\n                    })\r\n                })\r\n            })\r\n    }\r\n\r\n    function Image() {\r\n        if (isBookmarked) {\r\n            console.log('you made it',isBookmarked)\r\n            return <img src={'/images/bookmark-ribbon.png'} id=\"bookmark-lesson\" alt=\"bookmark\"/>\r\n        } else {\r\n            console.log('nope', isBookmarked)\r\n            return \"\"\r\n        }\r\n    }\r\n\r\n    // what the user is viewing\r\n    return (\r\n        <div>\r\n        <div id=\"btn-bookmark\" onClick={()=>postBookmark()}>Bookmark</div>\r\n        <div classname=\"bookmark-container\" style={{width:'100px', height:'250px', backgroundColor:\"red\", position:'absolute', marginLeft:'80%', marginTop:'-100px'}}>\r\n            <Image />\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default UserBookmark;"]},"metadata":{},"sourceType":"module"}