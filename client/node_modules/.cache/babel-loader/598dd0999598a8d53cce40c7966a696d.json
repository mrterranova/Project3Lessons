{"ast":null,"code":"import PropTypes from 'prop-types';\nimport React, { PureComponent, Component } from 'react';\nimport styled from 'styled-components';\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  return Constructor;\n}\n\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nfunction _objectSpread(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n    var ownKeys = Object.keys(source);\n\n    if (typeof Object.getOwnPropertySymbols === 'function') {\n      ownKeys = ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function (sym) {\n        return Object.getOwnPropertyDescriptor(source, sym).enumerable;\n      }));\n    }\n\n    ownKeys.forEach(function (key) {\n      _defineProperty(target, key, source[key]);\n    });\n  }\n\n  return target;\n}\n\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function\");\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) _setPrototypeOf(subClass, superClass);\n}\n\nfunction _getPrototypeOf(o) {\n  _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {\n    return o.__proto__ || Object.getPrototypeOf(o);\n  };\n  return _getPrototypeOf(o);\n}\n\nfunction _setPrototypeOf(o, p) {\n  _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n\n  return _setPrototypeOf(o, p);\n}\n\nfunction _assertThisInitialized(self) {\n  if (self === void 0) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return self;\n}\n\nfunction _possibleConstructorReturn(self, call) {\n  if (call && (typeof call === \"object\" || typeof call === \"function\")) {\n    return call;\n  }\n\n  return _assertThisInitialized(self);\n}\n\nvar getLength = function getLength(x, y) {\n  return Math.sqrt(x * x + y * y);\n};\n\nvar getAngle = function getAngle(_ref, _ref2) {\n  var x1 = _ref.x,\n      y1 = _ref.y;\n  var x2 = _ref2.x,\n      y2 = _ref2.y;\n  var dot = x1 * x2 + y1 * y2;\n  var det = x1 * y2 - y1 * x2;\n  var angle = Math.atan2(det, dot) / Math.PI * 180;\n  return (angle + 360) % 360;\n};\n\nvar degToRadian = function degToRadian(deg) {\n  return deg * Math.PI / 180;\n};\n\nvar cos = function cos(deg) {\n  return Math.cos(degToRadian(deg));\n};\n\nvar sin = function sin(deg) {\n  return Math.sin(degToRadian(deg));\n};\n\nvar setWidthAndDeltaW = function setWidthAndDeltaW(width, deltaW, minWidth) {\n  var expectedWidth = width + deltaW;\n\n  if (expectedWidth > minWidth) {\n    width = expectedWidth;\n  } else {\n    deltaW = minWidth - width;\n    width = minWidth;\n  }\n\n  return {\n    width: width,\n    deltaW: deltaW\n  };\n};\n\nvar setHeightAndDeltaH = function setHeightAndDeltaH(height, deltaH, minHeight) {\n  var expectedHeight = height + deltaH;\n\n  if (expectedHeight > minHeight) {\n    height = expectedHeight;\n  } else {\n    deltaH = minHeight - height;\n    height = minHeight;\n  }\n\n  return {\n    height: height,\n    deltaH: deltaH\n  };\n};\n\nvar getNewStyle = function getNewStyle(type, rect, deltaW, deltaH, ratio, minWidth, minHeight) {\n  var width = rect.width,\n      height = rect.height,\n      centerX = rect.centerX,\n      centerY = rect.centerY,\n      rotateAngle = rect.rotateAngle;\n  var widthFlag = width < 0 ? -1 : 1;\n  var heightFlag = height < 0 ? -1 : 1;\n  width = Math.abs(width);\n  height = Math.abs(height);\n\n  switch (type) {\n    case 'r':\n      {\n        var widthAndDeltaW = setWidthAndDeltaW(width, deltaW, minWidth);\n        width = widthAndDeltaW.width;\n        deltaW = widthAndDeltaW.deltaW;\n\n        if (ratio) {\n          deltaH = deltaW / ratio;\n          height = width / ratio; // 左上角固定\n\n          centerX += deltaW / 2 * cos(rotateAngle) - deltaH / 2 * sin(rotateAngle);\n          centerY += deltaW / 2 * sin(rotateAngle) + deltaH / 2 * cos(rotateAngle);\n        } else {\n          // 左边固定\n          centerX += deltaW / 2 * cos(rotateAngle);\n          centerY += deltaW / 2 * sin(rotateAngle);\n        }\n\n        break;\n      }\n\n    case 'tr':\n      {\n        deltaH = -deltaH;\n\n        var _widthAndDeltaW = setWidthAndDeltaW(width, deltaW, minWidth);\n\n        width = _widthAndDeltaW.width;\n        deltaW = _widthAndDeltaW.deltaW;\n        var heightAndDeltaH = setHeightAndDeltaH(height, deltaH, minHeight);\n        height = heightAndDeltaH.height;\n        deltaH = heightAndDeltaH.deltaH;\n\n        if (ratio) {\n          deltaW = deltaH * ratio;\n          width = height * ratio;\n        }\n\n        centerX += deltaW / 2 * cos(rotateAngle) + deltaH / 2 * sin(rotateAngle);\n        centerY += deltaW / 2 * sin(rotateAngle) - deltaH / 2 * cos(rotateAngle);\n        break;\n      }\n\n    case 'br':\n      {\n        var _widthAndDeltaW2 = setWidthAndDeltaW(width, deltaW, minWidth);\n\n        width = _widthAndDeltaW2.width;\n        deltaW = _widthAndDeltaW2.deltaW;\n\n        var _heightAndDeltaH = setHeightAndDeltaH(height, deltaH, minHeight);\n\n        height = _heightAndDeltaH.height;\n        deltaH = _heightAndDeltaH.deltaH;\n\n        if (ratio) {\n          deltaW = deltaH * ratio;\n          width = height * ratio;\n        }\n\n        centerX += deltaW / 2 * cos(rotateAngle) - deltaH / 2 * sin(rotateAngle);\n        centerY += deltaW / 2 * sin(rotateAngle) + deltaH / 2 * cos(rotateAngle);\n        break;\n      }\n\n    case 'b':\n      {\n        var _heightAndDeltaH2 = setHeightAndDeltaH(height, deltaH, minHeight);\n\n        height = _heightAndDeltaH2.height;\n        deltaH = _heightAndDeltaH2.deltaH;\n\n        if (ratio) {\n          deltaW = deltaH * ratio;\n          width = height * ratio; // 左上角固定\n\n          centerX += deltaW / 2 * cos(rotateAngle) - deltaH / 2 * sin(rotateAngle);\n          centerY += deltaW / 2 * sin(rotateAngle) + deltaH / 2 * cos(rotateAngle);\n        } else {\n          // 上边固定\n          centerX -= deltaH / 2 * sin(rotateAngle);\n          centerY += deltaH / 2 * cos(rotateAngle);\n        }\n\n        break;\n      }\n\n    case 'bl':\n      {\n        deltaW = -deltaW;\n\n        var _widthAndDeltaW3 = setWidthAndDeltaW(width, deltaW, minWidth);\n\n        width = _widthAndDeltaW3.width;\n        deltaW = _widthAndDeltaW3.deltaW;\n\n        var _heightAndDeltaH3 = setHeightAndDeltaH(height, deltaH, minHeight);\n\n        height = _heightAndDeltaH3.height;\n        deltaH = _heightAndDeltaH3.deltaH;\n\n        if (ratio) {\n          height = width / ratio;\n          deltaH = deltaW / ratio;\n        }\n\n        centerX -= deltaW / 2 * cos(rotateAngle) + deltaH / 2 * sin(rotateAngle);\n        centerY -= deltaW / 2 * sin(rotateAngle) - deltaH / 2 * cos(rotateAngle);\n        break;\n      }\n\n    case 'l':\n      {\n        deltaW = -deltaW;\n\n        var _widthAndDeltaW4 = setWidthAndDeltaW(width, deltaW, minWidth);\n\n        width = _widthAndDeltaW4.width;\n        deltaW = _widthAndDeltaW4.deltaW;\n\n        if (ratio) {\n          height = width / ratio;\n          deltaH = deltaW / ratio; // 右上角固定\n\n          centerX -= deltaW / 2 * cos(rotateAngle) + deltaH / 2 * sin(rotateAngle);\n          centerY -= deltaW / 2 * sin(rotateAngle) - deltaH / 2 * cos(rotateAngle);\n        } else {\n          // 右边固定\n          centerX -= deltaW / 2 * cos(rotateAngle);\n          centerY -= deltaW / 2 * sin(rotateAngle);\n        }\n\n        break;\n      }\n\n    case 'tl':\n      {\n        deltaW = -deltaW;\n        deltaH = -deltaH;\n\n        var _widthAndDeltaW5 = setWidthAndDeltaW(width, deltaW, minWidth);\n\n        width = _widthAndDeltaW5.width;\n        deltaW = _widthAndDeltaW5.deltaW;\n\n        var _heightAndDeltaH4 = setHeightAndDeltaH(height, deltaH, minHeight);\n\n        height = _heightAndDeltaH4.height;\n        deltaH = _heightAndDeltaH4.deltaH;\n\n        if (ratio) {\n          width = height * ratio;\n          deltaW = deltaH * ratio;\n        }\n\n        centerX -= deltaW / 2 * cos(rotateAngle) - deltaH / 2 * sin(rotateAngle);\n        centerY -= deltaW / 2 * sin(rotateAngle) + deltaH / 2 * cos(rotateAngle);\n        break;\n      }\n\n    case 't':\n      {\n        deltaH = -deltaH;\n\n        var _heightAndDeltaH5 = setHeightAndDeltaH(height, deltaH, minHeight);\n\n        height = _heightAndDeltaH5.height;\n        deltaH = _heightAndDeltaH5.deltaH;\n\n        if (ratio) {\n          width = height * ratio;\n          deltaW = deltaH * ratio; // 左下角固定\n\n          centerX += deltaW / 2 * cos(rotateAngle) + deltaH / 2 * sin(rotateAngle);\n          centerY += deltaW / 2 * sin(rotateAngle) - deltaH / 2 * cos(rotateAngle);\n        } else {\n          centerX += deltaH / 2 * sin(rotateAngle);\n          centerY -= deltaH / 2 * cos(rotateAngle);\n        }\n\n        break;\n      }\n  }\n\n  return {\n    position: {\n      centerX: centerX,\n      centerY: centerY\n    },\n    size: {\n      width: width * widthFlag,\n      height: height * heightFlag\n    }\n  };\n};\n\nvar cursorStartMap = {\n  n: 0,\n  ne: 1,\n  e: 2,\n  se: 3,\n  s: 4,\n  sw: 5,\n  w: 6,\n  nw: 7\n};\nvar cursorDirectionArray = ['n', 'ne', 'e', 'se', 's', 'sw', 'w', 'nw'];\nvar cursorMap = {\n  0: 0,\n  1: 1,\n  2: 2,\n  3: 2,\n  4: 3,\n  5: 4,\n  6: 4,\n  7: 5,\n  8: 6,\n  9: 6,\n  10: 7,\n  11: 8\n};\n\nvar getCursor = function getCursor(rotateAngle, d) {\n  var increment = cursorMap[Math.floor(rotateAngle / 30)];\n  var index = cursorStartMap[d];\n  var newIndex = (index + increment) % 8;\n  return cursorDirectionArray[newIndex];\n};\n\nvar centerToTL = function centerToTL(_ref3) {\n  var centerX = _ref3.centerX,\n      centerY = _ref3.centerY,\n      width = _ref3.width,\n      height = _ref3.height,\n      rotateAngle = _ref3.rotateAngle;\n  return {\n    top: centerY - height / 2,\n    left: centerX - width / 2,\n    width: width,\n    height: height,\n    rotateAngle: rotateAngle\n  };\n};\n\nvar tLToCenter = function tLToCenter(_ref4) {\n  var top = _ref4.top,\n      left = _ref4.left,\n      width = _ref4.width,\n      height = _ref4.height,\n      rotateAngle = _ref4.rotateAngle;\n  return {\n    position: {\n      centerX: left + width / 2,\n      centerY: top + height / 2\n    },\n    size: {\n      width: width,\n      height: height\n    },\n    transform: {\n      rotateAngle: rotateAngle\n    }\n  };\n};\n\nvar StyledRect = styled.div.withConfig({\n  displayName: \"StyledRect\",\n  componentId: \"sc-1uso172-0\"\n})([\"position:absolute;border:1px solid #eb5648;.square{position:absolute;width:7px;height:7px;background:white;border:1px solid #eb5648;border-radius:1px;}.resizable-handler{position:absolute;width:14px;height:14px;cursor:pointer;z-index:1;&.tl,&.t,&.tr{top:-7px;}&.tl,&.l,&.bl{left:-7px;}&.bl,&.b,&.br{bottom:-7px;}&.br,&.r,&.tr{right:-7px;}&.l,&.r{margin-top:-7px;}&.t,&.b{margin-left:-7px;}}.rotate{position:absolute;cursor:pointer;left:50%;top:-26px;transform:translateX(-50%);& i{font-size:18px;display:inline-block;width:1em;height:1em;background-size:1em 1em;background-repeat:no-repeat;background-position:center center;background-image:url(\\\"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTQiIGhlaWdodD0iMTQiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiPjxkZWZzPjxwYXRoIGlkPSJhIiBkPSJNOC4zIDUuNEw4IC40bDMuMiAyLjEgMS43IDF6Ii8+PG1hc2sgaWQ9ImIiIHg9IjAiIHk9IjAiIHdpZHRoPSI0LjkiIGhlaWdodD0iNC45IiBmaWxsPSIjZmZmIj48dXNlIHhsaW5rOmhyZWY9IiNhIi8+PC9tYXNrPjwvZGVmcz48ZyB0cmFuc2Zvcm09InRyYW5zbGF0ZSgxIDEpIiBzdHJva2U9IiNGNTVENTQiIGZpbGw9Im5vbmUiIGZpbGwtcnVsZT0iZXZlbm9kZCI+PHBhdGggZD0iTTExIDkuMkE2IDYgMCAwIDEgMCA2YTYgNiAwIDAgMSAxMC43LTMuOCIvPjx1c2UgbWFzaz0idXJsKCNiKSIgc3Ryb2tlLXdpZHRoPSIyIiB0cmFuc2Zvcm09Im1hdHJpeCgtMSAwIDAgMSAyMSAwKSIgeGxpbms6aHJlZj0iI2EiLz48L2c+PC9zdmc+Cg==\\\");}}.t,.tl,.tr{top:-3px;}.b,.bl,.br{bottom:-3px;}.r,.tr,.br{right:-3px;}.tl,.l,.bl{left:-3px;}.l,.r{top:50%;margin-top:-3px;}.t,.b{left:50%;margin-left:-3px;}\"]);\nvar zoomableMap = {\n  'n': 't',\n  's': 'b',\n  'e': 'r',\n  'w': 'l',\n  'ne': 'tr',\n  'nw': 'tl',\n  'se': 'br',\n  'sw': 'bl'\n};\n\nvar Rect =\n/*#__PURE__*/\nfunction (_PureComponent) {\n  _inherits(Rect, _PureComponent);\n\n  function Rect() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, Rect);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(Rect)).call.apply(_getPrototypeOf2, [this].concat(args)));\n\n    _defineProperty(_assertThisInitialized(_assertThisInitialized(_this)), \"setElementRef\", function (ref) {\n      _this.$element = ref;\n    });\n\n    _defineProperty(_assertThisInitialized(_assertThisInitialized(_this)), \"startDrag\", function (e) {\n      var startX = e.clientX,\n          startY = e.clientY;\n      _this.props.onDragStart && _this.props.onDragStart();\n      _this._isMouseDown = true;\n\n      var onMove = function onMove(e) {\n        if (!_this._isMouseDown) return; // patch: fix windows press win key during mouseup issue\n\n        e.stopImmediatePropagation();\n        var clientX = e.clientX,\n            clientY = e.clientY;\n        var deltaX = clientX - startX;\n        var deltaY = clientY - startY;\n\n        _this.props.onDrag(deltaX, deltaY);\n\n        startX = clientX;\n        startY = clientY;\n      };\n\n      var onUp = function onUp() {\n        document.removeEventListener('mousemove', onMove);\n        document.removeEventListener('mouseup', onUp);\n        if (!_this._isMouseDown) return;\n        _this._isMouseDown = false;\n        _this.props.onDragEnd && _this.props.onDragEnd();\n      };\n\n      document.addEventListener('mousemove', onMove);\n      document.addEventListener('mouseup', onUp);\n    });\n\n    _defineProperty(_assertThisInitialized(_assertThisInitialized(_this)), \"startRotate\", function (e) {\n      if (e.button !== 0) return;\n      var clientX = e.clientX,\n          clientY = e.clientY;\n      var startAngle = _this.props.styles.transform.rotateAngle;\n\n      var rect = _this.$element.getBoundingClientRect();\n\n      var center = {\n        x: rect.left + rect.width / 2,\n        y: rect.top + rect.height / 2\n      };\n      var startVector = {\n        x: clientX - center.x,\n        y: clientY - center.y\n      };\n      _this.props.onRotateStart && _this.props.onRotateStart();\n      _this._isMouseDown = true;\n\n      var onMove = function onMove(e) {\n        if (!_this._isMouseDown) return; // patch: fix windows press win key during mouseup issue\n\n        e.stopImmediatePropagation();\n        var clientX = e.clientX,\n            clientY = e.clientY;\n        var rotateVector = {\n          x: clientX - center.x,\n          y: clientY - center.y\n        };\n        var angle = getAngle(startVector, rotateVector);\n\n        _this.props.onRotate(angle, startAngle);\n      };\n\n      var onUp = function onUp() {\n        document.removeEventListener('mousemove', onMove);\n        document.removeEventListener('mouseup', onUp);\n        if (!_this._isMouseDown) return;\n        _this._isMouseDown = false;\n        _this.props.onRotateEnd && _this.props.onRotateEnd();\n      };\n\n      document.addEventListener('mousemove', onMove);\n      document.addEventListener('mouseup', onUp);\n    });\n\n    _defineProperty(_assertThisInitialized(_assertThisInitialized(_this)), \"startResize\", function (e, cursor) {\n      if (e.button !== 0) return;\n      document.body.style.cursor = cursor;\n      var _this$props$styles = _this.props.styles,\n          _this$props$styles$po = _this$props$styles.position,\n          centerX = _this$props$styles$po.centerX,\n          centerY = _this$props$styles$po.centerY,\n          _this$props$styles$si = _this$props$styles.size,\n          width = _this$props$styles$si.width,\n          height = _this$props$styles$si.height,\n          rotateAngle = _this$props$styles.transform.rotateAngle;\n      var startX = e.clientX,\n          startY = e.clientY;\n      var rect = {\n        width: width,\n        height: height,\n        centerX: centerX,\n        centerY: centerY,\n        rotateAngle: rotateAngle\n      };\n      var type = e.target.getAttribute('class').split(' ')[0];\n      _this.props.onResizeStart && _this.props.onResizeStart();\n      _this._isMouseDown = true;\n\n      var onMove = function onMove(e) {\n        if (!_this._isMouseDown) return; // patch: fix windows press win key during mouseup issue\n\n        e.stopImmediatePropagation();\n        var clientX = e.clientX,\n            clientY = e.clientY;\n        var deltaX = clientX - startX;\n        var deltaY = clientY - startY;\n        var alpha = Math.atan2(deltaY, deltaX);\n        var deltaL = getLength(deltaX, deltaY);\n        var isShiftKey = e.shiftKey;\n\n        _this.props.onResize(deltaL, alpha, rect, type, isShiftKey);\n      };\n\n      var onUp = function onUp() {\n        document.body.style.cursor = 'auto';\n        document.removeEventListener('mousemove', onMove);\n        document.removeEventListener('mouseup', onUp);\n        if (!_this._isMouseDown) return;\n        _this._isMouseDown = false;\n        _this.props.onResizeEnd && _this.props.onResizeEnd();\n      };\n\n      document.addEventListener('mousemove', onMove);\n      document.addEventListener('mouseup', onUp);\n    });\n\n    return _this;\n  }\n\n  _createClass(Rect, [{\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      var _this$props = this.props,\n          _this$props$styles2 = _this$props.styles,\n          _this$props$styles2$p = _this$props$styles2.position,\n          centerX = _this$props$styles2$p.centerX,\n          centerY = _this$props$styles2$p.centerY,\n          _this$props$styles2$s = _this$props$styles2.size,\n          width = _this$props$styles2$s.width,\n          height = _this$props$styles2$s.height,\n          rotateAngle = _this$props$styles2.transform.rotateAngle,\n          zoomable = _this$props.zoomable,\n          rotatable = _this$props.rotatable,\n          parentRotateAngle = _this$props.parentRotateAngle;\n      var style = {\n        width: Math.abs(width),\n        height: Math.abs(height),\n        transform: \"rotate(\".concat(rotateAngle, \"deg)\"),\n        left: centerX - Math.abs(width) / 2,\n        top: centerY - Math.abs(height) / 2\n      };\n      var direction = zoomable.split(',').map(function (d) {\n        return d.trim();\n      }).filter(function (d) {\n        return d;\n      }); // TODO: may be speed up\n\n      return React.createElement(StyledRect, {\n        ref: this.setElementRef,\n        onMouseDown: this.startDrag,\n        className: \"rect single-resizer\",\n        style: style\n      }, rotatable && React.createElement(\"div\", {\n        className: \"rotate\",\n        onMouseDown: this.startRotate\n      }, React.createElement(\"i\", null)), direction.map(function (d) {\n        var cursor = \"\".concat(getCursor(rotateAngle + parentRotateAngle, d), \"-resize\");\n        return React.createElement(\"div\", {\n          key: d,\n          style: {\n            cursor: cursor\n          },\n          className: \"\".concat(zoomableMap[d], \" resizable-handler\"),\n          onMouseDown: function onMouseDown(e) {\n            return _this2.startResize(e, cursor);\n          }\n        });\n      }), direction.map(function (d) {\n        return React.createElement(\"div\", {\n          key: d,\n          className: \"\".concat(zoomableMap[d], \" square\")\n        });\n      }));\n    }\n  }]);\n\n  return Rect;\n}(PureComponent);\n\n_defineProperty(Rect, \"propTypes\", {\n  styles: PropTypes.object,\n  zoomable: PropTypes.string,\n  rotatable: PropTypes.bool,\n  onResizeStart: PropTypes.func,\n  onResize: PropTypes.func,\n  onResizeEnd: PropTypes.func,\n  onRotateStart: PropTypes.func,\n  onRotate: PropTypes.func,\n  onRotateEnd: PropTypes.func,\n  onDragStart: PropTypes.func,\n  onDrag: PropTypes.func,\n  onDragEnd: PropTypes.func,\n  parentRotateAngle: PropTypes.number\n});\n\nvar ResizableRect =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(ResizableRect, _Component);\n\n  function ResizableRect() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, ResizableRect);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(ResizableRect)).call.apply(_getPrototypeOf2, [this].concat(args)));\n\n    _defineProperty(_assertThisInitialized(_assertThisInitialized(_this)), \"handleRotate\", function (angle, startAngle) {\n      if (!_this.props.onRotate) return;\n      var rotateAngle = Math.round(startAngle + angle);\n\n      if (rotateAngle >= 360) {\n        rotateAngle -= 360;\n      } else if (rotateAngle < 0) {\n        rotateAngle += 360;\n      }\n\n      if (rotateAngle > 356 || rotateAngle < 4) {\n        rotateAngle = 0;\n      } else if (rotateAngle > 86 && rotateAngle < 94) {\n        rotateAngle = 90;\n      } else if (rotateAngle > 176 && rotateAngle < 184) {\n        rotateAngle = 180;\n      } else if (rotateAngle > 266 && rotateAngle < 274) {\n        rotateAngle = 270;\n      }\n\n      _this.props.onRotate(rotateAngle);\n    });\n\n    _defineProperty(_assertThisInitialized(_assertThisInitialized(_this)), \"handleResize\", function (length, alpha, rect, type, isShiftKey) {\n      if (!_this.props.onResize) return;\n      var _this$props = _this.props,\n          rotateAngle = _this$props.rotateAngle,\n          aspectRatio = _this$props.aspectRatio,\n          minWidth = _this$props.minWidth,\n          minHeight = _this$props.minHeight,\n          parentRotateAngle = _this$props.parentRotateAngle;\n      var beta = alpha - degToRadian(rotateAngle + parentRotateAngle);\n      var deltaW = length * Math.cos(beta);\n      var deltaH = length * Math.sin(beta);\n      var ratio = isShiftKey && !aspectRatio ? rect.width / rect.height : aspectRatio;\n\n      var _getNewStyle = getNewStyle(type, _objectSpread({}, rect, {\n        rotateAngle: rotateAngle\n      }), deltaW, deltaH, ratio, minWidth, minHeight),\n          _getNewStyle$position = _getNewStyle.position,\n          centerX = _getNewStyle$position.centerX,\n          centerY = _getNewStyle$position.centerY,\n          _getNewStyle$size = _getNewStyle.size,\n          width = _getNewStyle$size.width,\n          height = _getNewStyle$size.height;\n\n      _this.props.onResize(centerToTL({\n        centerX: centerX,\n        centerY: centerY,\n        width: width,\n        height: height,\n        rotateAngle: rotateAngle\n      }), isShiftKey, type);\n    });\n\n    _defineProperty(_assertThisInitialized(_assertThisInitialized(_this)), \"handleDrag\", function (deltaX, deltaY) {\n      _this.props.onDrag && _this.props.onDrag(deltaX, deltaY);\n    });\n\n    return _this;\n  }\n\n  _createClass(ResizableRect, [{\n    key: \"render\",\n    value: function render() {\n      var _this$props2 = this.props,\n          top = _this$props2.top,\n          left = _this$props2.left,\n          width = _this$props2.width,\n          height = _this$props2.height,\n          rotateAngle = _this$props2.rotateAngle,\n          parentRotateAngle = _this$props2.parentRotateAngle,\n          zoomable = _this$props2.zoomable,\n          rotatable = _this$props2.rotatable,\n          onRotate = _this$props2.onRotate,\n          onResizeStart = _this$props2.onResizeStart,\n          onResizeEnd = _this$props2.onResizeEnd,\n          onRotateStart = _this$props2.onRotateStart,\n          onRotateEnd = _this$props2.onRotateEnd,\n          onDragStart = _this$props2.onDragStart,\n          onDragEnd = _this$props2.onDragEnd;\n      var styles = tLToCenter({\n        top: top,\n        left: left,\n        width: width,\n        height: height,\n        rotateAngle: rotateAngle\n      });\n      return React.createElement(Rect, {\n        styles: styles,\n        zoomable: zoomable,\n        rotatable: Boolean(rotatable && onRotate),\n        parentRotateAngle: parentRotateAngle,\n        onResizeStart: onResizeStart,\n        onResize: this.handleResize,\n        onResizeEnd: onResizeEnd,\n        onRotateStart: onRotateStart,\n        onRotate: this.handleRotate,\n        onRotateEnd: onRotateEnd,\n        onDragStart: onDragStart,\n        onDrag: this.handleDrag,\n        onDragEnd: onDragEnd\n      });\n    }\n  }]);\n\n  return ResizableRect;\n}(Component);\n\n_defineProperty(ResizableRect, \"propTypes\", {\n  left: PropTypes.number.isRequired,\n  top: PropTypes.number.isRequired,\n  width: PropTypes.number.isRequired,\n  height: PropTypes.number.isRequired,\n  rotatable: PropTypes.bool,\n  rotateAngle: PropTypes.number,\n  parentRotateAngle: PropTypes.number,\n  zoomable: PropTypes.string,\n  minWidth: PropTypes.number,\n  minHeight: PropTypes.number,\n  aspectRatio: PropTypes.oneOfType([PropTypes.number, PropTypes.bool]),\n  onRotateStart: PropTypes.func,\n  onRotate: PropTypes.func,\n  onRotateEnd: PropTypes.func,\n  onResizeStart: PropTypes.func,\n  onResize: PropTypes.func,\n  onResizeEnd: PropTypes.func,\n  onDragStart: PropTypes.func,\n  onDrag: PropTypes.func,\n  onDragEnd: PropTypes.func\n});\n\n_defineProperty(ResizableRect, \"defaultProps\", {\n  parentRotateAngle: 0,\n  rotateAngle: 0,\n  rotatable: true,\n  zoomable: '',\n  minWidth: 10,\n  minHeight: 10\n});\n\nexport default ResizableRect;","map":{"version":3,"sources":["../src/utils.js","../src/Rect/StyledRect.js","../src/Rect/index.js","../src/index.js"],"names":["getLength","Math","x","y","getAngle","x1","y1","x2","y2","dot","det","angle","degToRadian","deg","cos","sin","setWidthAndDeltaW","expectedWidth","width","deltaW","minWidth","setHeightAndDeltaH","expectedHeight","height","deltaH","minHeight","getNewStyle","centerX","centerY","rotateAngle","rect","widthFlag","heightFlag","widthAndDeltaW","heightAndDeltaH","position","size","cursorStartMap","n","ne","e","se","s","sw","w","nw","cursorDirectionArray","cursorMap","getCursor","increment","index","newIndex","centerToTL","top","left","tLToCenter","transform","styled","zoomableMap","Rect","PureComponent","styles","PropTypes","zoomable","rotatable","onResizeStart","onResize","onResizeEnd","onRotateStart","onRotate","onRotateEnd","onDragStart","onDrag","onDragEnd","parentRotateAngle","number","startX","startY","onMove","clientX","clientY","deltaX","deltaY","onUp","document","startAngle","center","startVector","rotateVector","type","alpha","deltaL","isShiftKey","style","direction","d","startRotate","cursor","ResizableRect","Component","aspectRatio","func","beta","length","ratio","Boolean"],"mappings":"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","sourcesContent":["export const getLength = (x, y) => Math.sqrt(x * x + y * y)\n\nexport const getAngle = ({ x: x1, y: y1 }, { x: x2, y: y2 }) => {\n  const dot = x1 * x2 + y1 * y2\n  const det = x1 * y2 - y1 * x2\n  const angle = Math.atan2(det, dot) / Math.PI * 180\n  return (angle + 360) % 360\n}\n\nexport const degToRadian = (deg) => deg * Math.PI / 180\n\nconst cos = (deg) => Math.cos(degToRadian(deg))\nconst sin = (deg) => Math.sin(degToRadian(deg))\n\nconst setWidthAndDeltaW = (width, deltaW, minWidth) => {\n  const expectedWidth = width + deltaW\n  if (expectedWidth > minWidth) {\n    width = expectedWidth\n  } else {\n    deltaW = minWidth - width\n    width = minWidth\n  }\n  return { width, deltaW }\n}\n\nconst setHeightAndDeltaH = (height, deltaH, minHeight) => {\n  const expectedHeight = height + deltaH\n  if (expectedHeight > minHeight) {\n    height = expectedHeight\n  } else {\n    deltaH = minHeight - height\n    height = minHeight\n  }\n  return { height, deltaH }\n}\n\nexport const getNewStyle = (type, rect, deltaW, deltaH, ratio, minWidth, minHeight) => {\n  let { width, height, centerX, centerY, rotateAngle } = rect\n  const widthFlag = width < 0 ? -1 : 1\n  const heightFlag = height < 0 ? -1 : 1\n  width = Math.abs(width)\n  height = Math.abs(height)\n  switch (type) {\n    case 'r': {\n      const widthAndDeltaW = setWidthAndDeltaW(width, deltaW, minWidth)\n      width = widthAndDeltaW.width\n      deltaW = widthAndDeltaW.deltaW\n      if (ratio) {\n        deltaH = deltaW / ratio\n        height = width / ratio\n        // 左上角固定\n        centerX += deltaW / 2 * cos(rotateAngle) - deltaH / 2 * sin(rotateAngle)\n        centerY += deltaW / 2 * sin(rotateAngle) + deltaH / 2 * cos(rotateAngle)\n      } else {\n        // 左边固定\n        centerX += deltaW / 2 * cos(rotateAngle)\n        centerY += deltaW / 2 * sin(rotateAngle)\n      }\n      break\n    }\n    case 'tr': {\n      deltaH = -deltaH\n      const widthAndDeltaW = setWidthAndDeltaW(width, deltaW, minWidth)\n      width = widthAndDeltaW.width\n      deltaW = widthAndDeltaW.deltaW\n      const heightAndDeltaH = setHeightAndDeltaH(height, deltaH, minHeight)\n      height = heightAndDeltaH.height\n      deltaH = heightAndDeltaH.deltaH\n      if (ratio) {\n        deltaW = deltaH * ratio\n        width = height * ratio\n      }\n      centerX += deltaW / 2 * cos(rotateAngle) + deltaH / 2 * sin(rotateAngle)\n      centerY += deltaW / 2 * sin(rotateAngle) - deltaH / 2 * cos(rotateAngle)\n      break\n    }\n    case 'br': {\n      const widthAndDeltaW = setWidthAndDeltaW(width, deltaW, minWidth)\n      width = widthAndDeltaW.width\n      deltaW = widthAndDeltaW.deltaW\n      const heightAndDeltaH = setHeightAndDeltaH(height, deltaH, minHeight)\n      height = heightAndDeltaH.height\n      deltaH = heightAndDeltaH.deltaH\n      if (ratio) {\n        deltaW = deltaH * ratio\n        width = height * ratio\n      }\n      centerX += deltaW / 2 * cos(rotateAngle) - deltaH / 2 * sin(rotateAngle)\n      centerY += deltaW / 2 * sin(rotateAngle) + deltaH / 2 * cos(rotateAngle)\n      break\n    }\n    case 'b': {\n      const heightAndDeltaH = setHeightAndDeltaH(height, deltaH, minHeight)\n      height = heightAndDeltaH.height\n      deltaH = heightAndDeltaH.deltaH\n      if (ratio) {\n        deltaW = deltaH * ratio\n        width = height * ratio\n        // 左上角固定\n        centerX += deltaW / 2 * cos(rotateAngle) - deltaH / 2 * sin(rotateAngle)\n        centerY += deltaW / 2 * sin(rotateAngle) + deltaH / 2 * cos(rotateAngle)\n      } else {\n        // 上边固定\n        centerX -= deltaH / 2 * sin(rotateAngle)\n        centerY += deltaH / 2 * cos(rotateAngle)\n      }\n      break\n    }\n    case 'bl': {\n      deltaW = -deltaW\n      const widthAndDeltaW = setWidthAndDeltaW(width, deltaW, minWidth)\n      width = widthAndDeltaW.width\n      deltaW = widthAndDeltaW.deltaW\n      const heightAndDeltaH = setHeightAndDeltaH(height, deltaH, minHeight)\n      height = heightAndDeltaH.height\n      deltaH = heightAndDeltaH.deltaH\n      if (ratio) {\n        height = width / ratio\n        deltaH = deltaW / ratio\n      }\n      centerX -= deltaW / 2 * cos(rotateAngle) + deltaH / 2 * sin(rotateAngle)\n      centerY -= deltaW / 2 * sin(rotateAngle) - deltaH / 2 * cos(rotateAngle)\n      break\n    }\n    case 'l': {\n      deltaW = -deltaW\n      const widthAndDeltaW = setWidthAndDeltaW(width, deltaW, minWidth)\n      width = widthAndDeltaW.width\n      deltaW = widthAndDeltaW.deltaW\n      if (ratio) {\n        height = width / ratio\n        deltaH = deltaW / ratio\n        // 右上角固定\n        centerX -= deltaW / 2 * cos(rotateAngle) + deltaH / 2 * sin(rotateAngle)\n        centerY -= deltaW / 2 * sin(rotateAngle) - deltaH / 2 * cos(rotateAngle)\n      } else {\n        // 右边固定\n        centerX -= deltaW / 2 * cos(rotateAngle)\n        centerY -= deltaW / 2 * sin(rotateAngle)\n      }\n      break\n    }\n    case 'tl': {\n      deltaW = -deltaW\n      deltaH = -deltaH\n      const widthAndDeltaW = setWidthAndDeltaW(width, deltaW, minWidth)\n      width = widthAndDeltaW.width\n      deltaW = widthAndDeltaW.deltaW\n      const heightAndDeltaH = setHeightAndDeltaH(height, deltaH, minHeight)\n      height = heightAndDeltaH.height\n      deltaH = heightAndDeltaH.deltaH\n      if (ratio) {\n        width = height * ratio\n        deltaW = deltaH * ratio\n      }\n      centerX -= deltaW / 2 * cos(rotateAngle) - deltaH / 2 * sin(rotateAngle)\n      centerY -= deltaW / 2 * sin(rotateAngle) + deltaH / 2 * cos(rotateAngle)\n      break\n    }\n    case 't': {\n      deltaH = -deltaH\n      const heightAndDeltaH = setHeightAndDeltaH(height, deltaH, minHeight)\n      height = heightAndDeltaH.height\n      deltaH = heightAndDeltaH.deltaH\n      if (ratio) {\n        width = height * ratio\n        deltaW = deltaH * ratio\n        // 左下角固定\n        centerX += deltaW / 2 * cos(rotateAngle) + deltaH / 2 * sin(rotateAngle)\n        centerY += deltaW / 2 * sin(rotateAngle) - deltaH / 2 * cos(rotateAngle)\n      } else {\n        centerX += deltaH / 2 * sin(rotateAngle)\n        centerY -= deltaH / 2 * cos(rotateAngle)\n      }\n      break\n    }\n  }\n\n  return {\n    position: {\n      centerX,\n      centerY\n    },\n    size: {\n      width: width * widthFlag,\n      height: height * heightFlag\n    }\n  }\n}\n\nconst cursorStartMap = { n: 0, ne: 1, e: 2, se: 3, s: 4, sw: 5, w: 6, nw: 7 }\nconst cursorDirectionArray = [ 'n', 'ne', 'e', 'se', 's', 'sw', 'w', 'nw' ]\nconst cursorMap = { 0: 0, 1: 1, 2: 2, 3: 2, 4: 3, 5: 4, 6: 4, 7: 5, 8: 6, 9: 6, 10: 7, 11: 8 }\nexport const getCursor = (rotateAngle, d) => {\n  const increment = cursorMap[ Math.floor(rotateAngle / 30) ]\n  const index = cursorStartMap[ d ]\n  const newIndex = (index + increment) % 8\n  return cursorDirectionArray[ newIndex ]\n}\n\nexport const centerToTL = ({ centerX, centerY, width, height, rotateAngle }) => ({\n  top: centerY - height / 2,\n  left: centerX - width / 2,\n  width,\n  height,\n  rotateAngle\n})\n\nexport const tLToCenter = ({ top, left, width, height, rotateAngle }) => ({\n  position: {\n    centerX: left + width / 2,\n    centerY: top + height / 2\n  },\n  size: {\n    width,\n    height\n  },\n  transform: {\n    rotateAngle\n  }\n})\n","import styled from 'styled-components'\n\nexport default styled.div`\n  position: absolute;\n  border: 1px solid #eb5648;\n\n  .square {\n    position: absolute;\n    width: 7px;\n    height: 7px;\n    background: white;\n    border: 1px solid #eb5648;\n    border-radius: 1px;\n  }\n\n  .resizable-handler {\n    position: absolute;\n    width: 14px;\n    height: 14px;\n    cursor: pointer;\n    z-index: 1;\n\n    &.tl,\n    &.t,\n    &.tr {\n      top: -7px;\n    }\n\n    &.tl,\n    &.l,\n    &.bl {\n      left: -7px;\n    }\n\n    &.bl,\n    &.b,\n    &.br {\n      bottom: -7px;\n    }\n\n    &.br,\n    &.r,\n    &.tr {\n      right: -7px;\n    }\n\n    &.l,\n    &.r {\n      margin-top: -7px;\n    }\n\n    &.t,\n    &.b {\n      margin-left: -7px;\n    }\n  }\n\n  .rotate {\n    position: absolute;\n    cursor: pointer;\n    left: 50%;\n    top: -26px;\n    transform: translateX(-50%);\n\n    & i {\n      font-size: 18px;\n      display: inline-block;\n      width: 1em;\n      height: 1em;\n      background-size: 1em 1em;\n      background-repeat: no-repeat;\n      background-position: center center;\n      background-image: url(\"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTQiIGhlaWdodD0iMTQiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiPjxkZWZzPjxwYXRoIGlkPSJhIiBkPSJNOC4zIDUuNEw4IC40bDMuMiAyLjEgMS43IDF6Ii8+PG1hc2sgaWQ9ImIiIHg9IjAiIHk9IjAiIHdpZHRoPSI0LjkiIGhlaWdodD0iNC45IiBmaWxsPSIjZmZmIj48dXNlIHhsaW5rOmhyZWY9IiNhIi8+PC9tYXNrPjwvZGVmcz48ZyB0cmFuc2Zvcm09InRyYW5zbGF0ZSgxIDEpIiBzdHJva2U9IiNGNTVENTQiIGZpbGw9Im5vbmUiIGZpbGwtcnVsZT0iZXZlbm9kZCI+PHBhdGggZD0iTTExIDkuMkE2IDYgMCAwIDEgMCA2YTYgNiAwIDAgMSAxMC43LTMuOCIvPjx1c2UgbWFzaz0idXJsKCNiKSIgc3Ryb2tlLXdpZHRoPSIyIiB0cmFuc2Zvcm09Im1hdHJpeCgtMSAwIDAgMSAyMSAwKSIgeGxpbms6aHJlZj0iI2EiLz48L2c+PC9zdmc+Cg==\");\n    }\n  }\n\n  .t,\n  .tl,\n  .tr {\n    top: -3px;\n  }\n\n  .b,\n  .bl,\n  .br {\n    bottom: -3px;\n  }\n\n  .r,\n  .tr,\n  .br {\n    right: -3px;\n  }\n\n  .tl,\n  .l,\n  .bl {\n    left: -3px;\n  }\n\n  .l,\n  .r {\n    top: 50%;\n    margin-top: -3px;\n  }\n\n  .t,\n  .b {\n    left: 50%;\n    margin-left: -3px;\n  }\n`\n","import PropTypes from 'prop-types'\nimport React, { PureComponent } from 'react'\nimport { getLength, getAngle, getCursor } from '../utils'\nimport StyledRect from './StyledRect'\n\nconst zoomableMap = {\n  'n': 't',\n  's': 'b',\n  'e': 'r',\n  'w': 'l',\n  'ne': 'tr',\n  'nw': 'tl',\n  'se': 'br',\n  'sw': 'bl'\n}\n\nexport default class Rect extends PureComponent {\n  static propTypes = {\n    styles: PropTypes.object,\n    zoomable: PropTypes.string,\n    rotatable: PropTypes.bool,\n    onResizeStart: PropTypes.func,\n    onResize: PropTypes.func,\n    onResizeEnd: PropTypes.func,\n    onRotateStart: PropTypes.func,\n    onRotate: PropTypes.func,\n    onRotateEnd: PropTypes.func,\n    onDragStart: PropTypes.func,\n    onDrag: PropTypes.func,\n    onDragEnd: PropTypes.func,\n    parentRotateAngle: PropTypes.number\n  }\n\n  setElementRef = (ref) => { this.$element = ref }\n\n  // Drag\n  startDrag = (e) => {\n    let { clientX: startX, clientY: startY } = e\n    this.props.onDragStart && this.props.onDragStart()\n    this._isMouseDown = true\n    const onMove = (e) => {\n      if (!this._isMouseDown) return // patch: fix windows press win key during mouseup issue\n      e.stopImmediatePropagation()\n      const { clientX, clientY } = e\n      const deltaX = clientX - startX\n      const deltaY = clientY - startY\n      this.props.onDrag(deltaX, deltaY)\n      startX = clientX\n      startY = clientY\n    }\n    const onUp = () => {\n      document.removeEventListener('mousemove', onMove)\n      document.removeEventListener('mouseup', onUp)\n      if (!this._isMouseDown) return\n      this._isMouseDown = false\n      this.props.onDragEnd && this.props.onDragEnd()\n    }\n    document.addEventListener('mousemove', onMove)\n    document.addEventListener('mouseup', onUp)\n  }\n\n  // Rotate\n  startRotate = (e) => {\n    if (e.button !== 0) return\n    const { clientX, clientY } = e\n    const { styles: { transform: { rotateAngle: startAngle } } } = this.props\n    const rect = this.$element.getBoundingClientRect()\n    const center = {\n      x: rect.left + rect.width / 2,\n      y: rect.top + rect.height / 2\n    }\n    const startVector = {\n      x: clientX - center.x,\n      y: clientY - center.y\n    }\n    this.props.onRotateStart && this.props.onRotateStart()\n    this._isMouseDown = true\n    const onMove = (e) => {\n      if (!this._isMouseDown) return // patch: fix windows press win key during mouseup issue\n      e.stopImmediatePropagation()\n      const { clientX, clientY } = e\n      const rotateVector = {\n        x: clientX - center.x,\n        y: clientY - center.y\n      }\n      const angle = getAngle(startVector, rotateVector)\n      this.props.onRotate(angle, startAngle)\n    }\n    const onUp = () => {\n      document.removeEventListener('mousemove', onMove)\n      document.removeEventListener('mouseup', onUp)\n      if (!this._isMouseDown) return\n      this._isMouseDown = false\n      this.props.onRotateEnd && this.props.onRotateEnd()\n    }\n    document.addEventListener('mousemove', onMove)\n    document.addEventListener('mouseup', onUp)\n  }\n\n  // Resize\n  startResize = (e, cursor) => {\n    if (e.button !== 0) return\n    document.body.style.cursor = cursor\n    const { styles: { position: { centerX, centerY }, size: { width, height }, transform: { rotateAngle } } } = this.props\n    const { clientX: startX, clientY: startY } = e\n    const rect = { width, height, centerX, centerY, rotateAngle }\n    const type = e.target.getAttribute('class').split(' ')[ 0 ]\n    this.props.onResizeStart && this.props.onResizeStart()\n    this._isMouseDown = true\n    const onMove = (e) => {\n      if (!this._isMouseDown) return // patch: fix windows press win key during mouseup issue\n      e.stopImmediatePropagation()\n      const { clientX, clientY } = e\n      const deltaX = clientX - startX\n      const deltaY = clientY - startY\n      const alpha = Math.atan2(deltaY, deltaX)\n      const deltaL = getLength(deltaX, deltaY)\n      const isShiftKey = e.shiftKey\n      this.props.onResize(deltaL, alpha, rect, type, isShiftKey)\n    }\n\n    const onUp = () => {\n      document.body.style.cursor = 'auto'\n      document.removeEventListener('mousemove', onMove)\n      document.removeEventListener('mouseup', onUp)\n      if (!this._isMouseDown) return\n      this._isMouseDown = false\n      this.props.onResizeEnd && this.props.onResizeEnd()\n    }\n    document.addEventListener('mousemove', onMove)\n    document.addEventListener('mouseup', onUp)\n  }\n\n  render () {\n    const {\n      styles: {\n        position: { centerX, centerY },\n        size: { width, height },\n        transform: { rotateAngle }\n      },\n      zoomable,\n      rotatable,\n      parentRotateAngle\n    } = this.props\n    const style = {\n      width: Math.abs(width),\n      height: Math.abs(height),\n      transform: `rotate(${rotateAngle}deg)`,\n      left: centerX - Math.abs(width) / 2,\n      top: centerY - Math.abs(height) / 2\n    }\n    const direction = zoomable.split(',').map(d => d.trim()).filter(d => d) // TODO: may be speed up\n\n    return (\n      <StyledRect\n        ref={this.setElementRef}\n        onMouseDown={this.startDrag}\n        className=\"rect single-resizer\"\n        style={style}\n      >\n        {\n          rotatable &&\n          <div className=\"rotate\" onMouseDown={this.startRotate}>\n            <i />\n          </div>\n        }\n\n        {\n          direction.map(d => {\n            const cursor = `${getCursor(rotateAngle + parentRotateAngle, d)}-resize`\n            return (\n              <div key={d} style={{ cursor }} className={`${zoomableMap[ d ]} resizable-handler`} onMouseDown={(e) => this.startResize(e, cursor)} />\n            )\n          })\n        }\n\n        {\n          direction.map(d => {\n            return (\n              <div key={d} className={`${zoomableMap[ d ]} square`} />\n            )\n          })\n        }\n      </StyledRect>\n    )\n  }\n}\n","import PropTypes from 'prop-types'\nimport React, { Component } from 'react'\nimport Rect from './Rect'\nimport { centerToTL, tLToCenter, getNewStyle, degToRadian } from './utils'\n\nexport default class ResizableRect extends Component {\n  static propTypes = {\n    left: PropTypes.number.isRequired,\n    top: PropTypes.number.isRequired,\n    width: PropTypes.number.isRequired,\n    height: PropTypes.number.isRequired,\n    rotatable: PropTypes.bool,\n    rotateAngle: PropTypes.number,\n    parentRotateAngle: PropTypes.number,\n    zoomable: PropTypes.string,\n    minWidth: PropTypes.number,\n    minHeight: PropTypes.number,\n    aspectRatio: PropTypes.oneOfType([\n      PropTypes.number,\n      PropTypes.bool\n    ]),\n    onRotateStart: PropTypes.func,\n    onRotate: PropTypes.func,\n    onRotateEnd: PropTypes.func,\n    onResizeStart: PropTypes.func,\n    onResize: PropTypes.func,\n    onResizeEnd: PropTypes.func,\n    onDragStart: PropTypes.func,\n    onDrag: PropTypes.func,\n    onDragEnd: PropTypes.func\n  }\n\n  static defaultProps = {\n    parentRotateAngle: 0,\n    rotateAngle: 0,\n    rotatable: true,\n    zoomable: '',\n    minWidth: 10,\n    minHeight: 10\n  }\n\n  handleRotate = (angle, startAngle) => {\n    if (!this.props.onRotate) return\n    let rotateAngle = Math.round(startAngle + angle)\n    if (rotateAngle >= 360) {\n      rotateAngle -= 360\n    } else if (rotateAngle < 0) {\n      rotateAngle += 360\n    }\n    if (rotateAngle > 356 || rotateAngle < 4) {\n      rotateAngle = 0\n    } else if (rotateAngle > 86 && rotateAngle < 94) {\n      rotateAngle = 90\n    } else if (rotateAngle > 176 && rotateAngle < 184) {\n      rotateAngle = 180\n    } else if (rotateAngle > 266 && rotateAngle < 274) {\n      rotateAngle = 270\n    }\n    this.props.onRotate(rotateAngle)\n  }\n\n  handleResize = (length, alpha, rect, type, isShiftKey) => {\n    if (!this.props.onResize) return\n    const { rotateAngle, aspectRatio, minWidth, minHeight, parentRotateAngle } = this.props\n    const beta = alpha - degToRadian(rotateAngle + parentRotateAngle)\n    const deltaW = length * Math.cos(beta)\n    const deltaH = length * Math.sin(beta)\n    const ratio = isShiftKey && !aspectRatio ? rect.width / rect.height : aspectRatio\n    const {\n      position: { centerX, centerY },\n      size: { width, height }\n    } = getNewStyle(type, { ...rect, rotateAngle }, deltaW, deltaH, ratio, minWidth, minHeight)\n\n    this.props.onResize(centerToTL({ centerX, centerY, width, height, rotateAngle }), isShiftKey, type)\n  }\n\n  handleDrag = (deltaX, deltaY) => {\n    this.props.onDrag && this.props.onDrag(deltaX, deltaY)\n  }\n\n  render () {\n    const {\n      top, left, width, height, rotateAngle, parentRotateAngle, zoomable, rotatable,\n      onRotate, onResizeStart, onResizeEnd, onRotateStart, onRotateEnd, onDragStart, onDragEnd\n    } = this.props\n\n    const styles = tLToCenter({ top, left, width, height, rotateAngle })\n\n    return (\n      <Rect\n        styles={styles}\n        zoomable={zoomable}\n        rotatable={Boolean(rotatable && onRotate)}\n        parentRotateAngle={parentRotateAngle}\n\n        onResizeStart={onResizeStart}\n        onResize={this.handleResize}\n        onResizeEnd={onResizeEnd}\n\n        onRotateStart={onRotateStart}\n        onRotate={this.handleRotate}\n        onRotateEnd={onRotateEnd}\n\n        onDragStart={onDragStart}\n        onDrag={this.handleDrag}\n        onDragEnd={onDragEnd}\n      />\n    )\n  }\n}\n"]},"metadata":{},"sourceType":"module"}